;!function(exports){function urlCoupon(o){if(PayBox.payInfo.couponInfo&&PayBox.payInfo.couponInfo.vouCardId&&PayBox.payInfo.couponInfo.vouCodeId&&PayBox.payInfo.uin==PayBox.payData.payParams.uin&&PayBox.canUseCoupon(PayBox.payInfo.type,PayBox.payInfo.month).canUse){var n="version=2&card_id="+PayBox.payInfo.couponInfo.vouCardId+"&code_id="+PayBox.payInfo.couponInfo.vouCodeId;return o+="&coupons_ext="+encodeURIComponent(n)}return o}function getCoupons(o){PayBox.payInfo.couponInfo=null,PayBox.queryCoupons(function(){PayBox.setCouponStatus(o)})}var getCookie=function(o){if(document.cookie&&""!=document.cookie)for(var n,e=document.cookie.split("; "),a=0,t=e.length,o=encodeURIComponent(o);t>a;a++)if(n=e[a].split("="),o==n[0])return decodeURIComponent(n[1]||"");return null},hasClass=function(o,n){return o&&$(o)&&$(o).className&&-1!=$(o).className.indexOf(n)?!0:!1},$=function(o){return document.getElementById(o)},cookie_uin="";cookie_uin=getCookie("uin")||"0",cookie_uin=cookie_uin.replace(/^o?0*/,"");var UIN=cookie_uin,isH5Pay=window.isH5Pay||!1,cancelledPay=!1,cancelType="",isAndroid=/\bV1_AND_SQI?_([\d\.]+)(.*? QQ\/([\d\.]+))?/.test(navigator.userAgent),isIOS=/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent),isIphone=/(iPhone).*? QQ\/([\d\.]+)/.test(navigator.userAgent),isIpad=/(iPad).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent),isWechat=function(){var o=navigator.userAgent.toLowerCase();return"micromessenger"==o.match(/MicroMessenger/i)?!0:!1},isTenvideo=function(){var o=navigator.userAgent;return/ QQLiveBrowser\//.test(o)||/ QQLiveHDBrowser\//.test(o)},isIOSFlatform=/iPad|iPhone|iPod/.test(navigator.userAgent),getPlat=function(){var o,n=/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent);return o=n?"ios":"android"},QQVersion=function(){if(isAndroid){var o=navigator.userAgent.match(/AND_SQ[\w]*_([\d\.]+)/);if(o&&o[1])return o[1]}else if(isIphone){var n=navigator.userAgent.match(/\bQQ\/([\d\.]+)/);if(n&&n[1])return n[1]}else if(isIpad){var e=navigator.userAgent.match(/\bIPadQQ\/([\d\.]+).*?\bQQ\/([\d\.]+)/);if(e&&e[1])return e[2]||e[1]}return"0"},QQVersion=QQVersion(),compareVer=function(o,n){for(var e=o.split("."),a=n.split("."),t=0;t<e.length;++t){if(a.length==t)return!1;if(e[t]!=a[t])return e[t]>a[t]?!1:!0}return e.length!=a.length?!0:!0},loadScript=function(src,callback,id,errorFn,isCrossOrigin){if(id){var o;try{o=eval(id)}catch(e){}if(o)return callback()}var _=document.createElement("script");_.async="async",_.src=src,isCrossOrigin&&_.setAttribute("crossOrigin","anonymous"),_.onload=function(){"function"==typeof callback&&callback()},_.onerror=function(){"function"==typeof errorFn&&errorFn()},document.getElementsByTagName("head")[0].appendChild(_)},loadCss=function(o,n,e){if(!o)return!1;if(getNode(e))return"function"==typeof n&&n(),!1;var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.id=e,a.href=o,document.getElementsByTagName("head")[0].appendChild(a),"function"==typeof n&&n()},getNode=function(o){return document.getElementById(o)},isTouchStart=!1,isTouchMoving=!1;document.body.addEventListener("touchstart",function(){isTouchStart=!0,isTouchMoving=!1}),document.body.addEventListener("touchmove",function(){isTouchStart&&(isTouchMoving=!0)}),document.body.addEventListener("touchend",function(){isTouchStart&&setTimeout(function(){isTouchMoving=!1,isTouchStart=!1},100)});var addEvent=function(o,n,e){var a=getNode(o);return a&&a.addEventListener(n,function(o){if(o.stopPropagation(),isTouchMoving)return!1;try{e(o.target,o)}catch(n){}}),window},delegate=function(o,n,e,a){var t=getNode(o);return t&&n&&e&&a?void addEvent(o,n,function(o){o&&e.indexOf(".")>=0&&-1!=o.className.toString().indexOf(e.substring(1))?a(o):o&&o.tagName.toLowerCase()==e&&a(o)}):!1},addClass=function(o,n){if(o&&getNode(o)){var e=getNode(o),a=e.className;-1==a.toString().indexOf(n)&&(e.className+=" "+n)}},removeClass=function(o,n){if(o&&getNode(o)){var e=getNode(o),a=e.className,t=a.toString().indexOf(n);-1!=t&&(e.className=a.replace((0==t?"":" ")+n,""))}},UNION_BOX_TPL='<div class="common-pay-wrap-plus ontouchmove="return false;">    <div id="_union_pay_box_mask_" class="common-pay-mask" ontouchmove="return false;" '+(/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent)?'ontouchend="return false;" ontouchstart="return false;" onclick="return false;"':"")+'></div><div class="common-pay-content">   <div class="common-pay-close" id="_union_pay_box_close_"></div> <div class="common-pay-mod common-pay-mod-svip">     <section class="common-pay-nav common-pay-nav-single common-pay-border-b">         <div class="common-pay-swiper">             <ul>                 <li class="swiper-icon-svip"><span style="background-image:url({show_icon})" class="icon-logo icon-single-full"></span></li>             </ul>         </div>     </section>     <section class="common-pay-haoma">         <span class="common-pay-icon-haoma"></span>         <div class="haoma-content">             <input type="tel" alt="开通号码" pattern="[0-9]*" id="_uni_pay_box_uin_" name="name" value="{uin}" class="haoma-input">                 <span id="_uni_pay_box_friend_nickname_" class="donate-friend-name"><i class="cover"></i></span>             </div>             <button id="_uni_pay_box_send_friend_" class="btn-donate-friend common-pay-color-svip" style="display:{send_friend_cls}">赠送好友</button>         </section>         <section class="common-pay-month">             <span class="common-pay-icon-month"></span>             <div class="common-pay-list-month">                 <ul class="common-pay-select-month common-pay-bgcolor-svip" id="_uni_pay_box_month_group_">                        {month_list}                     </ul>                 </div>                 <div id="_uni_pay_box_tips_" class="common-pay-tips">                     <p id="_uni_pay_box_tips_content_" class="common-info"><span id="_uni_pay_box_up_tips_" style="display: inline-block;">{tips_content}</span>                     </p>                 </div>             </section>            <section id="_pay_box_coupon_" class="common-pay-ticket" style="display: none">                <span class="common-pay-icon-ticket"></span>                <p class="common-pay-ticket-money" id="_pay_box_coupon_txt_"></p>                <div class="common-pay-ticket-renewals">                     <button class="common-pay-ticket-btn" id="_pay_box_coupon_more_">选择抵扣券</button>                </div>            </section>             <section class="common-pay-money common-pay-border-b">                 <span class="common-pay-icon-money"></span>                 <div class="common-pay-money-number">                     <span id="_uni_pay_box_amount_">20</span>元<b id="_pay_box_original_price_" style="display: none">25元</b>                 </div>                 <div id="_uni_pay_box_renew_wrap_" class="common-pay-payway-renewals" style="display:{autorenew_cls}">                     <label class="common-pay-cb">                         <!-- 会员态 -->                         <!-- <input type="checkbox" class="renewals-vip" checked="">连续包月 -->                         <input id="_uni_pay_box_autorenew_" type="checkbox" ontouchend="return false" onclick="return false" {is_auto_pay}>到期自动续费                     </label>                     <!-- 到期续费 -->                     <div id="_uni_pay_box_autorenew_bubble" class="bubble-tips">                         <span>已勾选自动续费</span>                     </div>                 </div>                 </section>                 <section class="common-pay-btn">                     <button id="_uni_pay_box_open_" class="common-pay-btn-open">立即开通</button>                     <button id="_uni_ask_friend_pay_" class="common-pay-btn-friend">{ask_friend_pay_txt}</button>                 </section>             </div>         </div>     </div>',WX_UNION_BOX_TPL='<div class="common-pay-wrap-wx-video show" ontouchmove="return false;">    <div id="_union_pay_box_mask_" class="common-pay-mask" ontouchmove="return false;" '+(/(iPad|iPhone|iPod).*? (IPad)?QQ\/([\d\.]+)/.test(navigator.userAgent)?'ontouchend="return false;" ontouchstart="return false;" onclick="return false;"':"")+'></div>    <div class="common-pay-content">        <div class="common-pay-close" id="_union_pay_box_close_"></div>        <div class="common-pay-mod common-pay-mod-svip">            <section class="common-pay-nav common-pay-nav-single common-pay-border-b">                <div class="common-pay-swiper">                    <ul>                        <li class="swiper-icon-svip"><span style="background-image:url({show_icon})" class="icon-logo icon-single-full"></span></li>                    </ul>                </div>            </section>            <div class="common-pay-account-info">                <div class="svip-info">                    <p style="background-image: url(//imgcache.gtimg.cn/vipstyle/mobile/client/vipzone/v4/release/img/movie/wx/page-s736bef929a.png)"></p>                    <p class="ui-nowrap">开通SVIP的QQ号：<span>{uin}</span></p>                </div>                <div class="video-member">                    <p style="background-image: url({union_icon})"></p>                    <p class="ui-nowrap">开通腾讯视频会员的帐号：<span>{uin}</span></p>                </div>                <div class="ann">                    <p></p>                    <p>QQ和微信是两个独立帐号，帐号信息不互通</p>                </div>                <div class="account-selec">                    <p></p>                    <div class="common-pay-payway-renewals">                         <label class="common-pay-cb-2">                         </label>                    </div>                </div>            </div>            <section class="common-pay-month">                <span class="common-pay-icon-month"></span>                <div class="common-pay-list-month">                    <ul class="common-pay-select-month common-pay-bgcolor-svip" id="_uni_pay_box_month_group_">                        {month_list}                    </ul>                </div>                 <div id="_uni_pay_box_tips_" class="common-pay-tips">                     <p id="_uni_pay_box_tips_content_" class="common-info"><span id="_uni_pay_box_up_tips_" style="display: inline-block;">{tips_content}</span>                     </p>                 </div>            </section>            <section class="common-pay-money common-pay-border-b">                <span class="common-pay-icon-money"></span>                <div class="common-pay-money-number">                    <span id="_uni_pay_box_amount_"></span>元                </div>                <div id="_uni_pay_box_renew_wrap_" class="common-pay-payway-renewals">                    <label class="common-pay-cb">                        <input id="_uni_pay_box_autorenew_" type="checkbox" ontouchend="return false" onclick="return false" {is_auto_pay}>到期自动续费                    </label>                    <div id="_uni_pay_box_autorenew_bubble" class="bubble-tips">                        <span>已勾选自动续费</span>                    </div>                </div>            </section>            <section class="common-pay-btn">                <button id="_uni_pay_box_open_" class="common-pay-btn-open">立即开通</button>               <button id="_uni_ask_friend_pay_" class="common-pay-btn-friend">{ask_friend_pay_txt}</button>            </section>        </div>    </div></div>',BOX_TIPS_TPL='<div class="pay-fris-dialog show" id="_uni_ask_service_msgbox_" ontouchmove="return false;">  <div class="pay-fris-dialog-cnt">      <div class="pay-fris-dialog-bd">          <span class="img" style="background-image:url({req_icon})"></span>          <div class="cnt">              <h3 class="js-title" id="_uni_pay_box_js_title_"></h3>              <p class="js-content" id="_uni_pay_box_js_content_"></p>          </div>      </div>      <div class="pay-fris-dialog-ft pay-fris-btn-group">          <button type="button" class="js-close" id="_uni_pay_box_js_close_">取消</button>          <button type="button" class="js-send" id="_uni_pay_box_js_send_">发送</button>      </div>  </div></div>',continueMonth='<li id="_unip_month_num_1" data-month="{month_1}" class="common-pay-input-month-num js_month_group checked">连续包月</li><li id="_unip_month_num_2" data-month="{month_2}" class="common-pay-input-month-num js_month_group">{month_2}</li><li id="_unip_month_num_3" data-month="{month_3}" class="common-pay-input-month-num js_month_group">{month_3}</li><li id="_unip_month_num_4" style="display:{month_4_cls}" data-month="{month_4}" class="common-pay-input-month-num js_month_group">{month_4}</li><li class="select-month-input" style="display:{other_month_cls}"><input id="_uni_pay_box_month_" type="tel" class="common-pay-input-month-num {month_cls}" maxlength="3" pattern="[0-9]*" placeholder="" value="{month}"></li>',normalMonth='<li id="_unip_month_num_1" data-month="{month_1}" class="common-pay-input-month-num js_month_group checked">{month_1}</li><li id="_unip_month_num_2" data-month="{month_2}" class="common-pay-input-month-num js_month_group">{month_2}</li><li id="_unip_month_num_3" data-month="{month_3}" class="common-pay-input-month-num js_month_group">{month_3}</li><li id="_unip_month_num_4" style="display:{month_4_cls}" data-month="{month_4}" class="common-pay-input-month-num js_month_group">{month_4}</li><li class="select-month-input" style="display:{other_month_cls}"><input id="_uni_pay_box_month_" type="tel" class="common-pay-input-month-num {month_cls}" maxlength="3" pattern="[0-9]*" placeholder="" value="{month}"></li>',singleMonth='<li id="_unip_month_num_1" data-month="{month_1}" class="common-pay-input-month-num js_month_group checked">{month_1}</li>',IAP_UNION_TPL='<div class="common-pay-dialog-plus ptm-bottom common-pay-iap common-pay-mod common-pay-mod-svip common-pay-dialog-show" ontouchmove="return false;"> <div id="_union_pay_box_mask_" class="common-pay-mask" ontouchmove="return false;"></div><div class="common-pay-cnt"><section class="common-pay-nav common-pay-nav-single common-pay-border-b"><div class="common-pay-swiper"><ul><li class="swiper-icon-svip"><span style="background-image:url({show_icon})" class="icon-logo icon-single-full"></span></li></ul></div></section><div class="common-pay-bd common-pay-border-b"><div class="common-pay-input-wrapper"><!-- input的size值为value号码的位数+1 --><div class="common-pay-input common-pay-input-number"><span class="common-pay-icon-haoma"></span><input id="_uni_pay_box_uin_" disabled="" type="tel" pattern="[0-9]*" class="common-pay-input-qqnumber" value="{uin}" maxlength="11"><!-- <span class="common-pay-icon common-pay-icon-cancel"></span> --></div><!-- 角标说明两种颜色:橙色（默认颜色,无需设置）红色（需要额外添加classname:red） --><div class="common-pay-input common-pay-input-month"><span class="common-pay-icon-month"></span><span class="common-pay-monthgroup" id="_uni_pay_box_month_group_"></span></div></div><div id="_uni_pay_box_tips_" class="common-pay-tips">您是手机付费用户，暂不能开通超级会员</div><div class="common-pay-info"><span class="common-pay-icon-money"></span><p class="common-pay-bill"><span id="_uni_pay_box_amount_">20</span>元<i id="_uni_pay_ori_amount_">原价25元</i></p><div id="_uni_pay_box_renew_wrap_" class="common-pay-payway-renewals" style="display:{autorenew_cls}"><label class="common-pay-cb"><input id="_uni_pay_box_autorenew_" type="checkbox" checked="" {is_auto_pay}>到期自动续费</label><!-- 到期续费 --><div id="_uni_pay_box_autorenew_bubble" class="bubble-tips"><span>已勾选自动续费</span></div></div></div></div><div class="common-pay-ft"><button id="_uni_pay_box_open_" type="button" class="common-pay-btn common-pay-btn-kt">立即开通</button><!-- 添加disabled可变灰色不可点击 --></div><div class="common-pay-apple-rule"><a href="javascript:void(0);" id="uni_club_rule">会员服务协议</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="javascript:void(0);" id="uni_private_rule">隐私协议</a></div><span id="_union_pay_box_close_" class="common-pay-close">关闭</span></div></div></div>',iapMonthTp='<span class="common-pay-input-month-num {checked_cls} js-iap-item" id="iap_item_{iapItemIndex}" data-month="{month}" data-iapItemIndex="{iapItemIndex}">{month_show}</span>',specMonthTpl='<span class="common-pay-input-month-num js_spec_month {checked_cls}" id="spec_item_{month}" data-month="{month}">{month}</span>',css="//imgcache.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/css/extend/dialog_noiap/style_plus.css?t=20170905",cssIAP="//imgcache.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/css/extend/dialog_iap/style_plus.css?t=20170905",COUPON_TPL='<div id="paybox_coupon_wrap" class="common-pay-dialog common-pay-ticket ptm-bottom" style="background: none;">    <div class="common-pay-cnt" id="paybox_coupon_content">        <div class="common-pay-ticket-wrap" >            <section class="common-pay-ticket-head common-pay-border-b">                <p>选择抵扣券</p>                <button id="paybox_coupon_close" class="common-pay-ticket-cancel-btn" type="button" name="button">取消</button>            </section>            <section class="common-pay-ticket-list">                <ul id="paybox_coupon_lists">                    {coupon_lists}                </ul>                <div class="common-pay-ticket-footer">                    <button id="paybox_coupon_not_use" class="common-pay-ticket-unuse-btn" type="button" name="button">暂不使用抵扣券</button>                    <!--p>已经没有更多券咯</p-->                </div>            </section>        </div>    </div></div>',COUPON_ITEM_TPL='<li class="js-coupon-li {coupon_status}" data-cardid="{cardid}" data-codeid="{codeid}" data-status="{status}">    <div class="ticket-content">        <div class="ticket-money">{amount}<span>元</span></div>        <div class="ticket-useinfo">            <h4 class="ticket-limit">{name}</h4>            <p class="ticket-time">有效期至{expired_time}</p>            <p class="ticket-time">{desc}</p>        </div>    </div>    <span class="icon-check"></span></li>',ANDROID_NEW_UP={offerId:"{offerId}",userId:cookie_uin,serviceCode:"{code}",serviceName:"{name}",openType:1,channel:"",unit:"个月",openMonth:"{month}",aid:"{aid}",autoPay:"{isAutoPay}",discountId:"",isCanChange:!1},IOS_PAY_PARA={pf:"qq_m_qq-2001-iap-{aid}",pfkey:"pfkey",product_id:"{product_id}",product_type:"{product_type}",pay_item:"{pay_item}",qq_product_id:"{qq_product_id}",qq_product_name:"{qq_product_name}",quantity:1,is_deposit_game_coin:0,app_id:"{app_id}",apple_pay_source:"vip_center",var_item:"aid={aid}"},SERVICE_CONFIG={};SERVICE_CONFIG.shvip={aid:"test.test",name:"SVIP+腾讯视频",code:"SHVIPGG",icon:"//imgcache.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/img/dialog_noiap/svip_video.png",reqicon:"//i.gtimg.cn/ACT/svip_act/act_img/public/201709/m1504841819_140x140.jpg",unionIcon:"//imgcache.gtimg.cn/vipstyle/mobile/client/vipzone/v4/release/img/movie/wx/video_icon.png",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iosShow:"0",key:"SHVIPGG",method:"",monthList:"12,3,6",hideOtherMonth:!1,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",name:"SVIP+腾讯视频",offerid:"1450012942",price:"35",isSupportContinuous:!0,contiprice:"30",askType:3,spePrice:"",tips:"<span class='red-tips'>立减5元</span>，享30元/月自动续费",def_tips:"开启自动续费，尊享<span class='red-tips'>30元/月</span>续费优惠",iaprule_url:"//m.vip.qq.com/clubact/2017/iap/privacy-policy-shvipgg.html",conti_policy:"<p><span><strong>35</strong>元/1个月</span></p>",iap:{"1_auto":{index:1,name:"1个月SVIP腾讯视频会员",price:"35",originPrice:"50",payParams:{qq_product_name:"1个月SVIP腾讯视频会员",product_id:"com.tencent.mqq.svipsp.autorenew.discount",product_type:2,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"1",apple_pay_source:"SVIP_腾讯视频会员_iap",app_id:"1450013155"},month:"1",month_show:"连续包月"},"1_month":{index:2,name:"1个月SVIP腾讯视频会员",price:"40",originPrice:"50",payParams:{qq_product_name:"1个月SVIP腾讯视频会员",product_id:"com.tencent.mqq.svipsp.nonrenewing.1months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"1",apple_pay_source:"SVIP_腾讯视频会员_iap",app_id:"1450013155"},month:"1"},"3_month":{index:3,name:"3个月SVIP腾讯视频会员",price:"118",originPrice:"150",payParams:{qq_product_name:"3个月SVIP腾讯视频会员",product_id:"com.tencent.mqq.svipsp.nonrenewing.3months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"3",apple_pay_source:"SVIP_腾讯视频会员_iap",app_id:"1450013155"},month:"3"},"12_month":{index:4,name:"12个月SVIP腾讯视频会员",price:"448",originPrice:"600",payParams:{qq_product_name:"12个月SVIP腾讯视频会员",product_id:"com.tencent.mqq.svipsp.nonrenewing.12months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"12",apple_pay_source:"SVIP_腾讯视频会员_iap",app_id:"1450013155"},month:"12"}}},SERVICE_CONFIG.muvip={aid:"test.test",name:"SVIP+QQ音乐",code:"BYSVPGG",icon:"//imgcache.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/img/dialog_noiap/svip_music.png",reqicon:"//i.gtimg.cn/ACT/svip_act/act_img/public/201711/m1510891302_qqmusic140.jpg",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iap:"",iosShow:"0",key:"BYSVPGG",method:"",monthList:"12,1,3",hideOtherMonth:!1,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",name:"SVIP+QQ音乐",offerid:"1450013069",price:"30",isSupportContinuous:!0,contiprice:"30",askType:5,spePrice:"",tips:"专享<span class='red-tips'>500首/月</span>付费音乐下载特权",def_tips:"勾选自动续费，付费音乐下载由300首/月升至<span class='red-tips'>500首/月</span>",iaprule_url:"//m.vip.qq.com/clubact/2017/iap/privacy-policy-muvipgg.html",conti_policy:"<p><span><strong>35</strong>元/1个月</span></p>",iap:{"1_auto":{index:1,name:"1个月SVIP+QQ音乐会员",price:"35",originPrice:"43",payParams:{qq_product_name:"1个月SVIP+QQ音乐会员",product_id:"com.tencent.mqq.svipyy.autorenew.1months",product_type:2,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"1",apple_pay_source:"SVIP_QQ音乐会员_iap",app_id:"1450013396"},month:"1",month_show:"连续包月"},"1_month":{index:2,name:"1个月SVIP+QQ音乐会员",price:"40",originPrice:"43",payParams:{qq_product_name:"1个月SVIP+QQ音乐会员",product_id:"com.tencent.mqq.svipyy.nonrenewing.1months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"1",apple_pay_source:"SVIP_QQ音乐会员_iap",app_id:"1450013396"},month:"1"},"3_month":{index:3,name:"3个月SVIP+QQ音乐会员",price:"108",originPrice:"129",payParams:{qq_product_name:"3个月SVIP+QQ音乐会员",product_id:"com.tencent.mqq.svipyy.nonrenewing.3months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"3",apple_pay_source:"SVIP_QQ音乐会员_iap",app_id:"1450013396"},month:"3"},"12_month":{index:4,name:"12个月SVIP+QQ音乐会员",price:"388",originPrice:"516",payParams:{qq_product_name:"12个月SVIP+QQ音乐会员",product_id:"com.tencent.mqq.svipyy.nonrenewing.12months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"12",apple_pay_source:"SVIP_QQ音乐会员_iap",app_id:"1450013396"},month:"12"}}},SERVICE_CONFIG.kgvip={aid:"test.test",name:"SVIP+全民K歌",code:"SKQVPGG",icon:"//imgcache.gtimg.cn/ACT/svip_act/act_img/public/201711/m1509697708_svipk.png",reqicon:"",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iap:"",iosShow:"0",key:"SKQVPGG",method:"",monthList:"12,3,6",hideOtherMonth:!1,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",name:"SVIP+全民K歌",offerid:"1450013073",price:"35",isSupportContinuous:!0,contiprice:"35",askType:"",spePrice:"",tips:"尊享联合特权，专业教唱随心学",def_tips:"尊享联合特权，专业教唱随心学",iaprule_url:"//m.vip.qq.com/clubact/2017/iap/privacy-policy-kgvipgg.html",conti_policy:"",iap:{"1_month":{index:1,name:"1个月SVIP全民K歌",price:"50",originPrice:"50",payParams:{qq_product_name:"1个月SVIP全民K歌",product_id:"com.tencent.mqq.svipkg.nonrenewing.1months",product_type:4,quantity:1,qq_product_id:3,is_deposit_game_coin:0,pay_item:"1",apple_pay_source:"SVIP_全民K歌_iap",app_id:"1450013685"},month:"1"}}},SERVICE_CONFIG.kmvip={aid:"test.test",name:"SVIP+K米",code:"SVIPKMDB",icon:"//imgcache.gtimg.cn/vipstyle/mobile/client/vipcommon/pay/v1/release/img/svip_kmi.png",reqicon:"",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iap:"",iosShow:"0",key:"SVIPKMDB",method:"",monthList:"12,3,6",hideOtherMonth:!1,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",name:"SVIP+K米",offerid:"1450013773",price:"25",isSupportContinuous:!0,contiprice:"22",askType:"",spePrice:"",tips:"<span class='red-tips'>立减3元</span>，享22元/月自动续费",def_tips:"开启自动续费，尊享22元/月续费优惠",conti_policy:""},SERVICE_CONFIG.tdmvip={aid:"test.test",name:"SVIP+腾讯动漫",code:"BASES",icon:"//imgcache.gtimg.cn/ACT/svip_act/act_img/public/201806/m1528095541_tdmvip.png",reqicon:"",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iap:"",iosShow:"0",key:"SVIPMHT",method:"",monthList:"1,3,12",hideOtherMonth:!1,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",name:"SVIP+腾讯动漫",offerid:"1450015301",price:"30",isSupportContinuous:!1,contiprice:"30",askType:"",spePrice:"",tips:"点券请前往<span style='color:red;'>腾讯动漫安卓版APP</span>查看",def_tips:"点券请前往<span style='color:red;'>腾讯动漫安卓版APP</span>查看",conti_policy:""},SERVICE_CONFIG.tyvip={aid:"test.test",name:"SVIP+腾讯体育",code:"STVIPGG",icon:"//imgcache.gtimg.cn/ACT/svip_act/act_img/public/201810/m1539071943_txty.png",reqicon:"",h5_ext:"",hdIconClzNor:"",hdIconClzSup:"",iap:"",iosShow:"0",key:"STVIPGG",method:"",monthList:"1,3,12,6",monthProductId:{1:{productid:"1",price:"35"},3:{productid:"3",price:"105"},6:{productid:"6",price:"210"},12:{productid:"12",price:"420"}},hideOtherMonth:!0,multiShow:"",multiShowFirst:"0",multiShowIcon:"1",mustH5:"0",offerid:"1450017898",price:"35",isSupportContinuous:!0,contiprice:"30",askType:"",spePrice:"",tips:"所选NBA球队全部比赛+英超等赛事直播",def_tips:"所选NBA球队全部比赛+英超等赛事直播",conti_policy:""};var SERVICE_UNION=["shvip"],IS_CONTINUE_MONTH=!0,MONTH_LENGTH=3,curPayData={},unionOpenCallback=null,inputConfig=null,fromId=0,protocol="https:"===location.protocol?"https":"http",openUrl=function(o){"undefined"!=typeof mqq&&"undefined"!=typeof mqq.ui&&"undefined"!=typeof mqq.ui.openUrl?mqq.ui.openUrl({url:document.location.protocol+o,target:1,style:1}):location.href=o},login=function(o){var n="http://ui.ptlogin2.qq.com/cgi-bin/login?style=9&appid=809041606&daid=18&low_login=0",e=o;e||(e=location.href),location.href=n+"&s_url="+encodeURIComponent(e)},copyObj=function(o){var n={};for(var e in o)n[e]=o[e];return n},formatTpl=function(o,n){return o.replace(/\{[^\}]*\}/g,function(o){return"undefined"!=typeof n[o.slice(1,-1)]?n[o.slice(1,-1)]:""})},fillObjData=function(o,n){var e=copyObj(o);for(var a in e)/\{[^\}]+\}/.test(e[a])&&(e[a]=e[a].replace(/\{[^\}]*\}/g,function(o){return"undefined"!=typeof n[o.slice(1,-1)]?n[o.slice(1,-1)]:""}));return e},showDialog=function(o,n){(isAndroid||isIOS)&&"undefined"!=typeof mqq&&"undefined"!=typeof mqq.ui&&"undefined"!=typeof mqq.ui.showDialog?mqq.ui.showDialog({title:n||"温馨提示",text:o,needCancelBtn:!1},function(){}):alert(o)},unionIapPay=function(o,n){var e=o.iapItems[o.iapItemIndex];if(!e||!e.payParams)return showDialog("系统错误，暂不支持支付"),!1;var a=fillObjData(IOS_PAY_PARA,{aid:o.aid,product_id:e.payParams.product_id,product_type:e.payParams.product_type,pay_item:e.payParams.pay_item,qq_product_id:e.payParams.qq_product_id,qq_product_name:e.payParams.qq_product_name,app_id:e.payParams.app_id,apple_pay_source:e.payParams.apple_pay_source});a.product_type=parseInt(a.product_type,10),dcReport(cookie_uin,200,inputConfig,a,null,o.aid,"",n.type,o.month),mqq.pay.pay(a,function(o,n){PayBox.onPayCallback(o,n,"ios")})},unionAndrPay=function(o,n){if(!o.isContiPay){var e=fillObjData(ANDROID_NEW_UP,{offerId:n.payParams.offerId,name:n.payParams.name,code:n.payParams.code,month:o.month,isAutoPay:o.isAutoPay,aid:o.aid});return PayBox.payInfo.uin!=cookie_uin&&mqq.compare("5.2")>=0&&(e.provideUin=PayBox.payInfo.uin,e.provideType="uin"),PayBox.payInfo.couponInfo&&PayBox.payInfo.couponInfo.vouCardId&&PayBox.payInfo.couponInfo.vouCodeId&&PayBox.payInfo.uin==PayBox.payData.payParams.uin&&PayBox.canUseCoupon(PayBox.payInfo.type,PayBox.payInfo.month).canUse&&(e.couponId=PayBox.payInfo.couponInfo.vouCodeId),mqq.tenpay.openService(e,PayBox.onPayCallback),dcReport(cookie_uin,200,inputConfig,e,null,o.aid,"",n.type,o.month),!1}try{window.localStorage.setItem("union_pay_success",1)}catch(a){}var t="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+("1*1"==o.month?1:o.month)+"&ap=-1&ru="+o.backUrl+"&wxAppid2=wxf0a80d0ac2e82aa7&as=1&cmn=1&continousmonth=1&client=wechat&sdkpay=1&sandbox="+("1"==getURLParam("sandbox")?1:"");openUrl(t),dcReport(cookie_uin,203,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)},unionTenvideoPay=function(o,n){if(!o.isContiPay){var e="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+o.month+"&ap="+(o.isAutoPay?1:0)+"&as=1&sandbox="+("1"==getURLParam("sandbox")?1:"");return e=urlCoupon(e),openUrl(e),dcReport(cookie_uin,200,inputConfig,n.payParams,null,o.aid,"",n.type,o.month),!1}try{window.localStorage.setItem("union_pay_success",1)}catch(a){}var e="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+("1*1"==o.month?1:o.month)+"&ap=-1&ru="+o.backUrl+"&wxAppid2=wxf0a80d0ac2e82aa7&as=1&cmn=1&continousmonth=1&client=wechat&sdkpay=1&sandbox="+("1"==getURLParam("sandbox")?1:"");TenvideoJSBridge.invoke("openView",{url:"txvideo://v.qq.com/HollywoodH5Activity?url="+encodeURIComponent(location.protocol+e),close:"0"}),dcReport(cookie_uin,203,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)},unionHybridPay=function(o,n){if(!o.isContiPay)return loadScript("//midas.gtimg.cn/h5pay/js/api/midas.js?max_age=2592000",function(){var e=!1,a={account:"qq",appid:n.payParams.offerId,service:n.payParams.serviceCode,pf:"2101",u:o.uin,sandbox:"1"==getURLParam("sandbox")?1:"",aid:o.aid,ap:o.isAutoPay?1:0,as:1,n:o.month,coupons_ext:"",mpid:"",dc:"",schema:"",schema_url:"",onSuccess:function(){e=!0},onClose:function(){"function"==typeof PayBox.onPayCallback&&(e?PayBox.onPayCallback({resultCode:0},"pay success"):PayBox.onPayCallback({resultCode:2},"pay back"))}};if(PayBox.payInfo.couponInfo&&PayBox.payInfo.couponInfo.vouCardId&&PayBox.payInfo.couponInfo.vouCodeId&&PayBox.payInfo.uin==PayBox.payData.payParams.uin&&PayBox.canUseCoupon(PayBox.payInfo.type,PayBox.payInfo.month).canUse){var t="version=2&card_id="+PayBox.payInfo.couponInfo.vouCardId+"&code_id="+PayBox.payInfo.couponInfo.vouCodeId;a.coupons_ext=encodeURIComponent(t)}Midas.openSubscribe(a),dcReport(cookie_uin,200,inputConfig,a,null,o.aid,"",n.type,o.month)},null,null,!1),!1;try{window.localStorage.setItem("union_pay_success",1)}catch(e){}var a="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+("1*1"==o.month?1:o.month)+"&ap=-1&ru="+o.backUrl+"&wxAppid2=wxf0a80d0ac2e82aa7&as=1&cmn=1&continousmonth=1&client=wechat&sdkpay=1&sandbox="+("1"==getURLParam("sandbox")?1:"");openUrl(a),dcReport(cookie_uin,203,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)},unionWechatPay=function(o,n){var e="callback_querywx"+ ++jsonCount,a="//cgi.vip.qq.com/qqvip/wx?callback="+e+"&g_tk="+qw.util.getCSRFToken({useWechatSkey:!0})+"&logintype=1&rand="+Math.random();window[e]=o.isContiPay?function(e){return function(e){if(0!=e.ret)return showDialog("系统繁忙，请稍后再试"),!1;try{window.localStorage.setItem("union_pay_success",1)}catch(a){}var t="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+("1*1"==o.month?1:o.month)+"&ap=-1&ru="+o.backUrl+"&as=1&cmn=1&continousmonth=1&client=wechat&sdkpay=1&sessionid=hy_gameid&sessiontype=wc_actoken&openid="+e.openid+"&openkey="+e.tkn+"&wxAppid2="+e.appid+"&sandbox="+("1"==getURLParam("sandbox")?1:"");openUrl(t),dcReport(o.uin,203,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)}}((new Date).getTime()):function(e){
return function(e){return 0!=e.ret?(showDialog("系统繁忙，请稍后再试"),!1):void loadScript("//midas.gtimg.cn/h5pay/js/api/midas.js?max_age=2592000",function(){var a=!1,t={account:"qq",appid:n.payParams.offerId,service:n.payParams.serviceCode,pf:"2101",u:o.uin,sandbox:"1"==getURLParam("sandbox")?1:"",aid:o.aid,ap:o.isAutoPay?1:0,as:1,n:o.month,coupons_ext:"",mpid:"",dc:"",schema:"",schema_url:"",sessionid:"hy_gameid",sessiontype:"wc_actoken",openid:e.openid,openkey:e.tkn,wxAppid2:e.appid,onSuccess:function(){a=!0},onClose:function(){"function"==typeof PayBox.onPayCallback&&(a?PayBox.onPayCallback({resultCode:0},"pay success"):PayBox.onPayCallback({resultCode:2},"pay back"))}};Midas.openSubscribe(t),dcReport(o.uin,200,inputConfig,t,null,o.aid,"",n.type,o.month)},null,null,!1)}}((new Date).getTime()),loadScript(a,null,null,null)},unionH5Pay=function(o,n){var e="//pay.qq.com/h5/index.shtml?m=buy&hh=1&&appid="+n.payParams.offerId+"&service_name="+n.payParams.name+"&service="+n.payParams.code+"&pf=2101&u="+o.uin+"&aid="+o.aid+"&c=qqsubscribe&n="+o.month+"&ap="+(o.isAutoPay?1:0)+"&as=1&sandbox="+("1"==getURLParam("sandbox")?1:"");e=urlCoupon(e),openUrl(e),dcReport(cookie_uin,200,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)},midasH5Pay=function(o,n){loadScript("//midas.gtimg.cn/h5pay/js/api/midas.js?max_age=2592000",function(){var e=!1,a=n.payParams.monthProductId[o.month].productid,t={account:"qq",u:o.uin,appid:n.payParams.offerId||"",service:n.payParams.code||"",productid:a,pf:"x-x-html5",sandbox:"1"==qw.util.getURLParam("sandbox"),aid:o.aid||"",as:1,dc:"mcard,qqcard,"+(o.disableChannel||""),onSuccess:function(){e=!0},onClose:function(){"function"==typeof PayBox.onPayCallback&&(e?PayBox.onPayCallback({resultCode:0},"pay success"):PayBox.onPayCallback({resultCode:2},"pay back"))}};console.log(t),Midas.openSubscribe(t),dcReport(cookie_uin,200,inputConfig,n.payParams,null,o.aid,"",n.type,o.month)},null,null,!1)},PayBox={isBoxOpening:!1,config:{},inputSetting:null,boxId:"_union_smartpay_box_",lastSSORequestTime:0,isForceOpenType:!1,payData:{},payInfo:{uin:UIN,nickName:"",type:"shvip",aid:"",changeUin:!1,month:3,defaultMonth:3,monthList:"",isAutoPay:!1,isContiPay:!1,price:10,askType:"",isIapPay:!1,iapItems:null,iapItemIndex:""},isSupportSend:!1,isSupportAskPay:!1,isSupportSelectFriend:!1,isSupportNativeAutoRenew:!1,hasShowAutoRenewBubble:!1,isSupportCoupon:!0,queryCgiCount:0,couponNotUse:!1,COUPON_STATUS:{GETTED:"CODE_STATUS_GETTED",USED:"CODE_STATUS_USED",OVERDUE:"CODE_STATUS_OVERDUE",FREEZED:"CODE_STATUS_FREEZED"},isTxspAct:!1,addEventListener:function(o,n,e){var a=$(o);return a&&a.addEventListener(n,function(o){o.stopPropagation(),e(o)}),PayBox},dispatchEvent:function(o,n){var e=document.createEvent("Event");e.initEvent(n,!0,!0),getNode(o)&&setTimeout(function(){getNode(o).dispatchEvent(e)},0)},formatTpl:function(o,n){return o.replace(/\{[^\}]*\}/g,function(o){return"undefined"!=typeof n[o.slice(1,-1)]?n[o.slice(1,-1)]:""})},getSelfPayPrice:function(){var o=PayBox.payInfo.price||30;return o},initService:function(o){PayBox.payInfo.type=o,PayBox.checkBoxStyle(),$("_pay_box_tabs_")&&$("_pay_box_tabs_").setAttribute("data-type",o),$("_pay_box_tabs_wrap_")&&$("_pay_box_tabs_wrap_").setAttribute("data-type",o)},canUseCouponNum:function(o,n,e){var a=0,t=0,i=new Array;if(e&&e.vouList)for(var p=0;p<e.vouList.length;p++){var _=PayBox.canUseCoupon(o,n,e.vouList[p]);e.vouList[p].status==PayBox.COUPON_STATUS.GETTED&&a++,_.canUse&&t++}return i.totalCouponNum=a,i.curCouPonNum=t,i},canUseCoupon:function(o,n,e){var a={canUse:!1,rule:{}},t=PayBox.getSelfPayPrice();if(e="undefined"==typeof e?PayBox.payInfo.couponInfo:e,e&&e.vouCardId&&e.vouCodeId&&e.status==PayBox.COUPON_STATUS.GETTED){var i={};try{i=JSON.parse(e.useRule)}catch(p){}parseInt(n)*t>=i.mini&&(o!=i.type&&"all"!=i.type||"undefined"!=typeof i.plat&&getPlat()!=i.plat||(a.canUse=!0)),a.rule=i}return a},hasSelectMonthItem:function(o){for(var n=!1,e=1;MONTH_LENGTH>=e;e++)if(PayBox.payInfo["month_"+e]==o){n=!0;break}return n},setCouponStatus:function(o,n){o&&IS_CONTINUE_MONTH&&(PayBox.payInfo.month="1*1");var e=PayBox.payInfo.couponInfo,a=PayBox.couponListData,t=(PayBox.getSelfPayPrice(),PayBox.payInfo.type),i=PayBox.payInfo.month;if(PayBox.couponNotUse=n,!$("_pay_box_coupon_txt_")||!$("_pay_box_coupon_"))return PayBox.setMonth(PayBox.payInfo.month),!1;if(!a||a&&(0!=a.errcode||"undefind"!=typeof a.vouList&&0==a.vouList.length))return $("_pay_box_coupon_txt_").innerHTML=o&&PayBox.config.coupon?"当前券不可用":"无抵扣券可用",a&&0==a.total&&($("_pay_box_coupon_more_").style.display="none"),PayBox.setMonth(PayBox.payInfo.month),!1;if(e&&e.status!=PayBox.COUPON_STATUS.GETTED)return $("_pay_box_coupon_txt_").innerHTML=e.status==PayBox.COUPON_STATUS.USED?"当前券已使用":"当前抵扣券不可用",PayBox.setMonth(PayBox.payInfo.month),!1;var p=PayBox.config.coupon;if(o===!0&&1==a.vouList.length&&"undefined"!=typeof p&&p.cardid&&p.codeid&&p.from&&(PayBox.payInfo.couponInfo=a.vouList[0],e=PayBox.payInfo.couponInfo),e&&e.vouCardId&&e.vouCodeId){$("_pay_box_coupon_txt_").innerHTML=e.value;var _=PayBox.canUseCoupon(t,i,a.vouList[r]);if(_.canUse===!1){var s=PayBox.getSelfPayPrice(),c=PayBox.payInfo.month;if(s*c<_.rule.mini){{PayBox.payInfo.month}PayBox.payInfo.month=Math.ceil(_.rule.mini/s)}}}else if(n!==!0){for(var u=null,d=0,r=0;r<a.vouList.length;r++){var y=PayBox.canUseCoupon(t,i,a.vouList[r]);y.canUse&&y.rule.mini>d&&(u=a.vouList[r],d=y.rule.mini)}if(u)PayBox.payInfo.couponInfo=u,$("_pay_box_coupon_txt_").innerHTML=u.name;else{var m=PayBox.canUseCouponNum(t,i,a),l=m.totalCouponNum;$("_pay_box_coupon_txt_").innerHTML="当前无抵扣券适用"+(l>0?"（"+l+"张待选）":"")}}else{var m=PayBox.canUseCouponNum(t,i,a),h=m.curCouPonNum,l=m.totalCouponNum,f="当前无抵扣券适用"+(l>0?"（"+l+"张待选）":"");f=1==n?"当前未选择抵扣券"+(h>0?"（"+h+"张可选）":""):f,f=o&&PayBox.config.coupon?"当前券已使用":f,$("_pay_box_coupon_txt_").innerHTML=f}PayBox.setMonth(PayBox.payInfo.month)},getMatchCoupons:function(o,n){var e=[];if(0==n.errcode&&n.vouList.length>0){for(var a=0;a<n.vouList.length;a++){var t={};try{t=JSON.parse(n.vouList[a].useRule)}catch(i){}o!=t.type&&"all"!=t.type||"undefined"!=typeof t.plat&&getPlat()!=t.plat||e.push(n.vouList[a])}n.vouList=e}return n},queryCoupons:function(o,n){if(!PayBox.isSupportCoupon)return!1;var e=!1,a="couponCallback_"+PayBox.queryCgiCount++,t="//cgi.vip.qq.com/voucherv2/query?callback="+a+"&g_tk="+qw.util.getCSRFToken();if(t+="&type="+PayBox.payData.type+"&plat="+getPlat(),"undefined"!=typeof n&&n.cardid&&n.codeid&&n.from&&(t+="&cardid="+n.cardid+"&codeid="+n.codeid+"&from="+n.from,e=!0),window[a]=function(e){e&&"undefined"!=typeof e.ssoRet&&(0==e.ssoRet&&"undefined"!=typeof e.data?(e="undefined"!=typeof JSON?JSON.parse(e.data):{},e=e[10918]||e[10919]||{},e=e.data||{},e=e.rsp||null):e=null);var a=PayBox.payData.type;if(e=PayBox.getMatchCoupons(a,e),PayBox.couponListData=e,$("_pay_box_coupon_")&&($("_pay_box_coupon_").style.display=PayBox.payInfo.uin==PayBox.payData.payParams.uin&&(e&&0==e.errcode&&e.vouList&&e.vouList.length>0||"undefined"!=typeof n&&n.cardid)?"":"none"),o&&"function"==typeof o)return o(),!1;if(0==e.errcode&&e.vouList.length>0){var t=PayBox.boxId+"coupon",i=null;if($(t))i=$(t),i.style.display="";else{i=document.createElement("div"),i.id=t,document.body.appendChild(i),i.innerHTML=PayBox.formatTpl(COUPON_TPL,{coupon_lists:""}),"show"==$("_pay_box_coupon_more_").getAttribute("data-cpm")&&($("paybox_coupon_wrap").style.background="");var p=!1,_=!1;PayBox.addEventListener(t,"touchstart",function(o){p=!0,_=!1}).addEventListener(t,"touchmove",function(o){p&&(_=!0)}).addEventListener("touchend",function(){p&&setTimeout(function(){_=!1,p=!1},100)}),PayBox.addEventListener("paybox_coupon_lists","touchend",function(o){if(_)return!1;var n=function(o,e){return o?o&&o.className&&-1!=o.className.indexOf(e)?o:n(o.parentNode,e):null},e=n(o.target,"js-coupon-li");if(null==e)return!1;var a=e.getAttribute("data-cardid"),i=e.getAttribute("data-codeid"),p=e.getAttribute("data-status");if(p!=PayBox.COUPON_STATUS.GETTED)return!1;for(var s=null,c=0;c<PayBox.couponListData.vouList.length;c++)if(PayBox.couponListData.vouList[c].vouCardId==a&&PayBox.couponListData.vouList[c].vouCodeId==i){s=PayBox.couponListData.vouList[c];break}var u=$("_unip_month_num_1");u.getAttribute("data-month").indexOf("*")>-1&&hasClass("_unip_month_num_1","checked")&&removeClass("_unip_month_num_1","checked"),PayBox.payInfo.couponInfo=s,PayBox.setCouponStatus(),setTimeout(function(){$(t).style.display="none",removeClass("paybox_coupon_wrap","common-pay-dialog-show")},350)}),PayBox.addEventListener("paybox_coupon_close","touchend",function(o){return _?!1:void setTimeout(function(){$(t).style.display="none",removeClass("paybox_coupon_wrap","common-pay-dialog-show")},350)}),PayBox.addEventListener("paybox_coupon_not_use","touchend",function(o){if(_)return!1;var n=$("_unip_month_num_1");n.getAttribute("data-month").indexOf("*")>-1&&hasClass("_unip_month_num_1","checked")&&(PayBox.payInfo.month=n.getAttribute("data-month")),PayBox.payInfo.couponInfo=null,PayBox.setCouponStatus(!1,!0),setTimeout(function(){$(t).style.display="none",removeClass("paybox_coupon_wrap","common-pay-dialog-show")},350)})}for(var s=[],c=[],u=[],d=0;d<e.vouList.length;d++){var r=e.vouList[d],y=parseInt(r.price)?parseInt(r.price,10)/100:0;if(0!=y){var m=new Date(1e3*r.endTime);m=m.getFullYear()+"-"+(m.getMonth()+1)+"-"+m.getDate();var l={coupon_status:"",cardid:r.vouCardId,codeid:r.vouCodeId,status:r.status,amount:y,name:r.value,desc:r.limitContent,expired_time:m};r.status==PayBox.COUPON_STATUS.GETTED&&(l.coupon_status="svipticket",PayBox.payInfo.couponInfo&&r.vouCardId==PayBox.payInfo.couponInfo.vouCardId&&r.vouCodeId==PayBox.payInfo.couponInfo.vouCodeId&&PayBox.payInfo.uin==PayBox.payData.payParams.uin&&!PayBox.payInfo.isContiPay&&(l.coupon_status+=" selected"),s.push(PayBox.formatTpl(COUPON_ITEM_TPL,l))),r.status==PayBox.COUPON_STATUS.USED&&(l.coupon_status="usedticket",u.push(PayBox.formatTpl(COUPON_ITEM_TPL,l))),r.status==PayBox.COUPON_STATUS.OVERDUE&&(l.coupon_status="overtimeticket",u.push(PayBox.formatTpl(COUPON_ITEM_TPL,l))),r.status==PayBox.COUPON_STATUS.FREEZED&&(l.coupon_status="frozenticket",l.desc="支付未完成冻结，3小时后解冻",c.push(PayBox.formatTpl(COUPON_ITEM_TPL,l)))}}0==s.length&&0==c.length&&0==u.length&&u.push('<p style="text-align: center;">您还未获得抵扣券哦~</p>'),$("paybox_coupon_lists").innerHTML=s.join("")+c.join("")+u.join(""),addClass("paybox_coupon_wrap","common-pay-dialog-show")}else $("_pay_box_coupon_txt_").innerHTML="无抵扣券可用",e&&0==e.total&&$("_pay_box_coupon_more_")&&($("_pay_box_coupon_more_").style.display="none")},(new Date).getTime()-PayBox.lastSSORequestTime>1500&&(isIphone||isAndroid)&&mqq.compare("5.7.0")>=0&&"0"!=getURLParam("sso")){PayBox.lastSSORequestTime=(new Date).getTime();var i="VipPayLogicSvc";1==getURLParam("testSso")&&(i="VacProxyDvtestSvc");var p=10919,_={};e?(p=10918,_[p]={req:{cardId:n.cardid,codeId:n.codeid,from:n.from,vouType:PayBox.payData.type,platform:getPlat(),skey:qw.util.cookie("skey")},uin:parseInt(PayBox.payData.payParams.uin)||0}):_[p]={req:{count:20,index:0,vouType:PayBox.payData.type,platform:getPlat(),skey:qw.util.cookie("skey")},uin:parseInt(PayBox.payData.payParams.uin)||0},mqq.invoke("sso","uniAgent",{cmd:i+"."+p,needCookie:0,data:_},window[a])}else loadScript(t)},onPayCallback:function(o,n,e){var a=inputConfig||{},t=e&&"ios"==e,i=t?o:o?o.resultCode:-1,p=3;if(0==i?p=0:200==i?p=1:6!=i&&7!=i&&(t||1!=i&&2!=i)?100==i&&(p=200):p=2,2==p&&0==cancelledPay&&1!=a.disableQuitPay){cancelledPay=!0,cancelType="40",dcReport(cookie_uin,2601,inputConfig,"","",inputConfig.aid,2e3,inputConfig.type,inputConfig.month);var _='<button type="button" data-role="button" class="common-btn-primary" id="_cancel_js_pay_">继续支付</button>',s="<h3>放弃不是你的性格</h3>",c="<p>畅享SVIP+只差一步！海量内容在等你~</p>";loadCss("//imgcache.qq.com/vipstyle/mobile/client/vipcommon/dialog/retain/v1/css/common-dialog.css",function(){var e='<div class="common-dialog-cnt" ontouchmove="return false"><div class="common-dialog-hd"><div class="common-img"><span style="background-image:url(//imgcache.gtimg.cn/ACT/svip_act/act_img/public/201710/m1508999651_cancelpay.jpg)"></span></div></div><div class="common-dialog-bd">'+s+c+'</div><div class="common-dialog-ft common-dialog-ft-muti">'+_+'</div><i class="common-dialog-iconclose" data-role="button" id="_cancel_js_close_"></i></div>',a=document.createElement("div");a.id="cancel_pay_svip_plus",a.className="common-dialog common-dialog-operate show",a.innerHTML=e,document.body.appendChild(a);{var t=document.getElementById("_cancel_js_close_"),i=document.getElementById("_cancel_js_pay_");document.getElementById("_cancel_friend_pay"),document.getElementById("_cancel_ios_rule")}document.getElementById("cancel_pay_svip_plus").addEventListener("touchmove",function(o){o.preventDefault()}),t.addEventListener("touchend",function(e){e.stopPropagation(),e.preventDefault(),setTimeout(function(){document.getElementById("cancel_pay_svip_plus")&&document.body.removeChild(document.getElementById("cancel_pay_svip_plus"))},350),"function"==typeof unionOpenCallback&&unionOpenCallback({ret:p,msg:n?n:o?o.resultMsg:""}),cancelType="42",dcReport(cookie_uin,2602,inputConfig,"","",inputConfig.aid,2e3,inputConfig.type,inputConfig.month)}),i.addEventListener("touchend",function(o){o.stopPropagation(),o.preventDefault(),setTimeout(function(){document.getElementById("cancel_pay_svip_plus")&&document.body.removeChild(document.getElementById("cancel_pay_svip_plus"))},350);PayBox.openService(),cancelType="41",setTimeout(function(){cancelledPay=!0},1e3),dcReport(cookie_uin,2603,inputConfig,"","",inputConfig.aid,2e3,inputConfig.type,inputConfig.month)})},"cancel_pay_svip_plus_css")}else"function"==typeof unionOpenCallback&&unionOpenCallback({ret:p,msg:n?n:o?o.resultMsg:""});isIOS||"unitepay"!=inputConfig.from||getCoupons(!1);try{}catch(u){}var d=202;0==i?d=201:6!=i&&7!=i&&(t||1!=i&&2!=i)?200==i&&(d=208):d=205;var r={ret:i,msg:t?n:o?o.resultMsg:-1};dcReport(cookie_uin,d,inputConfig,r,"",inputConfig.aid,i,inputConfig.type,inputConfig.month),0==i&&cancelledPay&&(d=209,dcReport(cookie_uin,d,inputConfig,r,"",inputConfig.aid,i,inputConfig.type,inputConfig.month))},checkCurEnv:function(o){isAndroid?(mqq.compare("5.2.0")>=0&&(PayBox.isSupportSend=!0,PayBox.isSupportAskPay=!0),SERVICE_CONFIG[o.type]&&""==SERVICE_CONFIG[o.type].askType&&(PayBox.isSupportAskPay=!1),"undefined"!=typeof mqq&&"undefined"!=typeof mqq.support&&mqq.support("mqq.data.getFriendInfo")&&(PayBox.isSupportSelectFriend=!0)):"h5"==o.payType&&(PayBox.isSupportSend=!0,"undefined"!=typeof mqq&&"undefined"!=typeof mqq.support&&mqq.support("mqq.data.getFriendInfo")&&(PayBox.isSupportSelectFriend=!0))},closePayBox:function(o){return PayBox.isBoxOpening=!1,getNode(PayBox.boxId)&&getNode("_union_pay_box_mask_")&&getNode("_union_pay_box_mask_").parentNode&&(getNode("_union_pay_box_mask_").parentNode.style.opacity=0,setTimeout(function(){getNode(PayBox.boxId)&&(getNode(PayBox.boxId).style.display="none",document.body.removeChild(getNode(PayBox.boxId)))},450)),o?!1:("function"==typeof unionOpenCallback&&unionOpenCallback({ret:1,msg:"pay box cancel"}),void dcReport(cookie_uin,208,inputConfig,"","",inputConfig.aid,"",inputConfig.type,PayBox.payInfo.month))},setSendStatus:function(o,n){PayBox.payInfo.uin=o,PayBox.payInfo.nickName=n,getNode("_uni_pay_box_uin_")&&(getNode("_uni_pay_box_uin_").value=PayBox.payInfo.uin),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display="none"),n&&!PayBox.payInfo.changeUin?(getNode("_uni_pay_box_friend_nickname_")&&(getNode("_uni_pay_box_friend_nickname_").innerHTML="（"+(n||"好友")+"）"),getNode("_uni_pay_box_uin_")&&(getNode("_uni_pay_box_uin_").style.width=10*(o+"").length+"px")):getNode("_uni_pay_box_friend_nickname_")&&(getNode("_uni_pay_box_friend_nickname_").innerHTML=""),PayBox.blurUin(PayBox.payInfo.uin),PayBox.calcPayAmount(),PayBox.updateAutoRenewBubble()},blurUin:function(o){var n=parseInt(o,10);return!/\d+/.test(n)||n!=o||o.toString().length<5?(getNode("_uni_pay_box_uin_").value=PayBox.payInfo.uin,!1):(PayBox.payInfo.uin=n,PayBox.calcPayAmount(),PayBox.updateAskPayDisplay(),getNode("_uni_pay_box_renew_wrap_").style.display="wechat"==PayBox.payData.account?"inline-block":PayBox.payInfo.uin==UIN?"inline-block":"none",void PayBox.updateAutoRenewBubble())},validOpenMonth:function(){var o=getNode("_uni_pay_box_month_").value;o=parseInt(o,10);for(var n=!1,e=1;MONTH_LENGTH>=e;e++)-1!=getNode("_unip_month_num_"+e).className.indexOf("checked")&&(n=!0);return!/\d+/.test(o)||o&&o>960||0>=o?(PayBox.dispatchEvent("_unip_month_num_1","touchend"),!1):(PayBox.payInfo.month=o,getNode("_uni_pay_box_month_").value=PayBox.payInfo.month,addClass("_uni_pay_box_month_","checked"),void PayBox.calcPayAmount())},updateAutoRenewBubble:function(){if("wechat"==PayBox.payData.account)if(!PayBox.hasShowAutoRenewBubble&&getNode("_uni_pay_box_autorenew_").checked){if(getNode("_uni_pay_box_renew_wrap_")&&"none"==getNode("_uni_pay_box_renew_wrap_").style.display)return;addClass("_uni_pay_box_autorenew_bubble","show"),PayBox.hasShowAutoRenewBubble=!0}else PayBox.hasShowAutoRenewBubble&&getNode("_uni_pay_box_renew_wrap_")&&"none"==getNode("_uni_pay_box_renew_wrap_").style.display&&removeClass("_uni_pay_box_autorenew_bubble","show");else if(!PayBox.hasShowAutoRenewBubble&&PayBox.payInfo.uin==UIN&&getNode("_uni_pay_box_autorenew_").checked){if(getNode("_uni_pay_box_renew_wrap_")&&"none"==getNode("_uni_pay_box_renew_wrap_").style.display)return;addClass("_uni_pay_box_autorenew_bubble","show"),PayBox.hasShowAutoRenewBubble=!0}else PayBox.hasShowAutoRenewBubble&&getNode("_uni_pay_box_renew_wrap_")&&"none"==getNode("_uni_pay_box_renew_wrap_").style.display&&removeClass("_uni_pay_box_autorenew_bubble","show")},showPayBox:function(o,n){var e=PayBox.payInfo.monthList.split(","),a=e[0],t=SERVICE_CONFIG[PayBox.payData.type].hideOtherMonth;if("iap"==o.payType){if(PayBox.payInfo.month=a||1,PayBox.payInfo.isIapPay===!1||null==PayBox.payInfo.iapItems)return showDialog("抱歉，暂不支持iOS平台，敬请期待！"),!1;if(!getNode("_pay_box_css_union_")){var i=document.createElement("link");i.id="_pay_box_css_union_",i.rel="stylesheet",i.type="text/css",i.href=cssIAP,document.getElementsByTagName("head")[0].appendChild(i)}var p=formatTpl(IAP_UNION_TPL,{uin:o.payParams.uin,show_icon:o.payParams.icon,ask_friend_pay_txt:PayBox.isSupportAskPay?"好友代付":"",send_friend_cls:PayBox.isSupportSelectFriend?"":"none",autorenew_cls:PayBox.isSupportNativeAutoRenew?"":"none",is_auto_pay:PayBox.payInfo.isAutoPay?"checked":"",box_style:"ptm-bottom"});if(getNode(PayBox.boxId))getNode(PayBox.boxId).innerHTML=p;else{var _=document.createElement("div");_.id=PayBox.boxId,_.innerHTML=p,document.body.appendChild(_)}var s="",c={};for(var u in PayBox.payInfo.iapItems)c[PayBox.payInfo.iapItems[u].index]=PayBox.payInfo.iapItems[u],c[PayBox.payInfo.iapItems[u].index].id=u;for(var u in c)if(1==e.length){if(PayBox.payInfo.month+"_month"==c[u].id){s+=formatTpl(iapMonthTp,{iapItemIndex:c[u].id,month:c[u].month,month_show:c[u].month_show||c[u].month+"个月"});break}}else s+=formatTpl(iapMonthTp,{iapItemIndex:c[u].id,month:c[u].month,month_show:c[u].month_show||c[u].month+"个月"});if(""==s&&(s='<span class="common-pay-input-month-num js-iap-item" id="iap_item_1_month" data-month="1" data-iapItemIndex="1_month">1个月</span>'),getNode("_uni_pay_box_month_group_").innerHTML=s,getNode("iap_item_"+PayBox.payInfo.month))addClass("iap_item_"+PayBox.payInfo.month,"active");else{var _=getNode("_uni_pay_box_month_group_").children[0];"undefined"!=typeof getNode("_uni_pay_box_month_group_").children[1]&&(_=getNode("_uni_pay_box_month_group_").children[1]),_.className+=" active",PayBox.payInfo.month=_.getAttribute("data-month"),PayBox.payInfo.iapItemIndex=_.getAttribute("data-iapItemIndex")}getNode("_uni_pay_box_uin_")&&getNode("_uni_pay_box_uin_").setAttribute("disabled","disabled"),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display="none"),getNode("_uni_pay_box_tips_")&&(getNode("_uni_pay_box_tips_").style.display="none"),PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").style.display="",getNode("_uni_pay_box_tips_").innerHTML=PayBox.checkTipText())}else{var d=3,r=1,y="";if(MONTH_LENGTH=e.length,1==e.length)IS_CONTINUE_MONTH=!1,y=formatTpl(singleMonth,{month_1:a});else{d=e[1],r=e[2];var m=!getNode("_uni_pay_box_month_")||"其他"==getNode("_uni_pay_box_month_").value&&""==getNode("_uni_pay_box_month_").value?"其他":getNode("_uni_pay_box_month_").value;y=formatTpl(normalMonth,{month:m,month_1:a,month_2:d,month_3:r,month_4:e[3],month_4_cls:1==t&&e[3]?"":"none",other_month_cls:1==t?"none":""})}if(!getNode("_pay_box_css_union_")){var i=document.createElement("link");i.id="_pay_box_css_union_",i.rel="stylesheet",i.type="text/css",i.href=css,document.getElementsByTagName("head")[0].appendChild(i)}if(PayBox.payInfo.month=a,IS_CONTINUE_MONTH){PayBox.payInfo.month=a=1,a="1*1";var m=!getNode("_uni_pay_box_month_")||"其他"==getNode("_uni_pay_box_month_").value&&""==getNode("_uni_pay_box_month_").value?"其他":getNode("_uni_pay_box_month_").value;y=formatTpl(continueMonth,{month:m,month_1:a,month_2:d,month_3:r,month_4:e[3],month_4_cls:1==t&&e[3]?"":"none",other_month_cls:t?"none":""}),PayBox.isSupportNativeAutoRenew=!1,PayBox.hasShowAutoRenewBubble=!1}var l="common-pay-tips",h="",f=SERVICE_CONFIG[o.type];f.tips&&(h=f.tips,l="common-pay-tipsshow");var p="";if(p="wechat"==o.account?formatTpl(WX_UNION_BOX_TPL,{uin:o.payParams.uin,show_icon:o.payParams.icon,union_icon:SERVICE_CONFIG[PayBox.payData.type].unionIcon,ask_friend_pay_txt:PayBox.isSupportAskPay?"好友代付":"",tips_content:h,month_list:y,send_friend_cls:PayBox.isSupportSelectFriend?"":"none",autorenew_cls:PayBox.isSupportNativeAutoRenew?"":"none",is_auto_pay:PayBox.payInfo.isAutoPay?"checked":"",box_style:"ptm-bottom",month_cls:"其他"!=PayBox.payInfo.month?"common-pay-input-month-num custom-other checked":"common-pay-input-month-num custom-other"}):formatTpl(UNION_BOX_TPL,{uin:o.payParams.uin,show_icon:o.payParams.icon,ask_friend_pay_txt:PayBox.isSupportAskPay?"好友代付":"",tips_content:h,month_list:y,send_friend_cls:PayBox.isSupportSelectFriend?"":"none",autorenew_cls:PayBox.isSupportNativeAutoRenew?"":"none",is_auto_pay:PayBox.payInfo.isAutoPay?"checked":"",box_style:"ptm-bottom",month_cls:"其他"!=PayBox.payInfo.month?"common-pay-input-month-num custom-other checked":"common-pay-input-month-num custom-other"}),getNode(PayBox.boxId))getNode(PayBox.boxId).innerHTML=p;else{var _=document.createElement("div");_.id=PayBox.boxId,_.innerHTML=p,document.body.appendChild(_)}PayBox.setMonth(a),PayBox.selectMonth(),PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").style.display="",getNode("_uni_pay_box_tips_").innerHTML=PayBox.checkTipText())}dcReport(cookie_uin,206,inputConfig,"",null,inputConfig.aid,"",inputConfig.type,PayBox.payInfo.month)},resetPageShow:function(o){var n=PayBox.payInfo.monthList.split(","),e=n[0],a=SERVICE_CONFIG[PayBox.payData.type].hideOtherMonth;if("iap"==o.payType){if(PayBox.payInfo.month=e||1,PayBox.payInfo.isIapPay===!1||null==PayBox.payInfo.iapItems)return showDialog("抱歉，暂不支持iOS平台，敬请期待！"),!1;getNode("_uni_ask_friend_pay_")&&(getNode("_uni_ask_friend_pay_").innerHTML=PayBox.isSupportAskPay?"好友代付":""),getNode("_uni_pay_box_send_friend_")&&(getNode("_uni_pay_box_send_friend_").style.display=PayBox.isSupportSelectFriend?"":"none"),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display=PayBox.isSupportNativeAutoRenew?"":"none");var t=PayBox.payInfo.isAutoPay?!0:!1;getNode("_uni_pay_box_autorenew_")&&t&&getNode("_uni_pay_box_autorenew_").setAttribute("checked","");var i="",p={};for(var _ in PayBox.payInfo.iapItems)p[PayBox.payInfo.iapItems[_].index]=PayBox.payInfo.iapItems[_],p[PayBox.payInfo.iapItems[_].index].id=_;var s='<li class="common-pay-input-month-num {checked_cls} js-iap-page" id="iap_item_{iapItemIndex}" data-month="{month}" data-iapItemIndex="{iapItemIndex}">{month_show}</li>';for(var _ in p)if(1==n.length){if(PayBox.payInfo.month+"_month"==p[_].id){i+=formatTpl(s,{iapItemIndex:p[_].id,month:p[_].month,month_show:p[_].month_show||p[_].month+"个月"});break}}else i+=formatTpl(s,{iapItemIndex:p[_].id,month:p[_].month,month_show:p[_].month_show||p[_].month+"个月"});if(""==i&&(i='<li class="common-pay-input-month-num js-iap-page" id="iap_item_1_month" data-month="1" data-iapItemIndex="1_month">1个月</li>'),getNode("_uni_pay_box_month_group_").innerHTML=i,getNode("iap_item_"+PayBox.payInfo.month))addClass("iap_item_"+PayBox.payInfo.month,"checked");else{var c=getNode("_uni_pay_box_month_group_").children[0];"undefined"!=typeof getNode("_uni_pay_box_month_group_").children[1]&&(c=getNode("_uni_pay_box_month_group_").children[1]),c.className+=" checked",PayBox.payInfo.month=c.getAttribute("data-month"),PayBox.payInfo.iapItemIndex=c.getAttribute("data-iapItemIndex")}getNode("_uni_pay_box_uin_")&&getNode("_uni_pay_box_uin_").setAttribute("disabled","disabled"),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display="none"),getNode("_uni_pay_box_tips_")&&!PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").style.display="none")}else{var u=3,d=1,r="";if(MONTH_LENGTH=n.length,1==n.length)IS_CONTINUE_MONTH=!1,r=formatTpl(singleMonth,{month_1:e});else{u=n[1],d=n[2];var y=!getNode("_uni_pay_box_month_")||"其他"==getNode("_uni_pay_box_month_").value&&""==getNode("_uni_pay_box_month_").value?"其他":getNode("_uni_pay_box_month_").value;r=formatTpl(normalMonth,{month:y,month_1:e,month_2:u,month_3:d,month_4:n[3],month_4_cls:1==a&&n[3]?"":"none",other_month_cls:1==a?"none":""})}if(PayBox.payInfo.month=e,IS_CONTINUE_MONTH){PayBox.payInfo.month=e=1,e="1*1";var y=!getNode("_uni_pay_box_month_")||"其他"==getNode("_uni_pay_box_month_").value&&""==getNode("_uni_pay_box_month_").value?"其他":getNode("_uni_pay_box_month_").value;r=formatTpl(continueMonth,{month:y,month_1:e,month_2:u,month_3:d,month_4:n[3],month_4_cls:1==a&&n[3]?"":"none",other_month_cls:1==a?"none":""}),PayBox.isSupportNativeAutoRenew=!1,PayBox.hasShowAutoRenewBubble=!1}getNode("_uni_pay_box_month_group_")&&(getNode("_uni_pay_box_month_group_").innerHTML=r),getNode("_uni_ask_friend_pay_")&&(getNode("_uni_ask_friend_pay_").innerHTML=PayBox.isSupportAskPay?"好友代付":""),getNode("_uni_pay_box_send_friend_")&&(getNode("_uni_pay_box_send_friend_").style.display=PayBox.isSupportSelectFriend?"":"none"),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display=PayBox.isSupportNativeAutoRenew?"":"none");var t=PayBox.payInfo.isAutoPay?!0:!1;getNode("_uni_pay_box_autorenew_")&&t&&getNode("_uni_pay_box_autorenew_").setAttribute("checked",""),getNode("_uni_pay_ori_amount_")&&(getNode("_uni_pay_ori_amount_").style.display="none"),PayBox.setMonth(e),PayBox.selectMonth()}},checkServiceTips:function(){var o=PayBox.payData.type;if(o in SERVICE_CONFIG&&"iap"!=PayBox.payData.payType){var n=SERVICE_CONFIG[o];""!=n.tips?getNode("_uni_pay_box_tips_")&&(getNode("_uni_pay_box_up_tips_").innerHTML=PayBox.checkTipText(n.tips),getNode("_uni_pay_box_tips_").style.display=""):getNode("_uni_pay_box_tips_")&&!PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").innerHTML="",getNode("_uni_pay_box_tips_").style.display="none")}else getNode("_uni_pay_box_tips_")&&!PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").style.display="none")},updateAskPayDisplay:function(){PayBox.isSupportAskPay===!1||PayBox.isSupportSelectFriend===!1||PayBox.payInfo.uin!=UIN?addClass("_uni_ask_friend_pay_","disabled"):removeClass("_uni_ask_friend_pay_","disabled")},setMonth:function(o){o=""+o;for(var n=!0,e=1;MONTH_LENGTH>=e;e++)-1!=o.indexOf("*")&&1==e?(n=!1,removeClass("_uni_pay_box_month_group_ li","checked"),addClass("_unip_month_num_"+e,"checked"),PayBox.payInfo.month=1,PayBox.calcPayAmount()):getNode("_unip_month_num_"+e)&&getNode("_unip_month_num_"+e).innerHTML==o&&(n=!1,removeClass("_uni_pay_box_month_group_ li","checked"),addClass("_unip_month_num_"+e,"checked"),PayBox.payInfo.month=o,PayBox.calcPayAmount());if(n&&o){for(var a=0;a<getNode("_uni_pay_box_month_group_").children.length;a++)getNode("_uni_pay_box_month_group_").children[a]&&getNode("_uni_pay_box_month_group_").children[a].id&&removeClass(getNode("_uni_pay_box_month_group_").children[a].id,"checked");addClass("_uni_pay_box_month_","checked"),PayBox.calcPayAmount()}},selectMonth:function(){var o=getNode("_uni_pay_box_month_")&&getNode("_uni_pay_box_month_").value;o=parseInt(o,10),(!/\d+/.test(o)||o&&o>960||0>=o)&&(o="其他",getNode("_uni_pay_box_month_")&&(getNode("_uni_pay_box_month_").value=o));for(var n=!1,e=1;MONTH_LENGTH>=e;e++)if(getNode("_unip_month_num_"+e)&&-1!=getNode("_unip_month_num_"+e).className.indexOf("checked")){n=!0;break}o&&"其他"!=o||PayBox.resetOtherMonth(),n||o&&"其他"!=o||(addClass("_unip_month_num_1","checked"),PayBox.payInfo.month=getNode("_unip_month_num_1").innerHTML,n=!0);for(var e=1;MONTH_LENGTH>=e;e++)if(o&&getNode("_unip_month_num_"+e)&&getNode("_unip_month_num_"+e).innerHTML==o){PayBox.resetOtherMonth(),addClass("_unip_month_num_"+e,"checked"),getNode("_uni_pay_box_month_")&&(getNode("_uni_pay_box_month_").value="其他"),n=!0;break}n||(getNode("_uni_pay_box_month_")&&(getNode("_uni_pay_box_month_").value=o),PayBox.payInfo.month=o,PayBox.enableOtherMonth())},enableOtherMonth:function(){getNode("_uni_pay_box_month_")&&addClass("_uni_pay_box_month_","checked")},resetOtherMonth:function(){getNode("_uni_pay_box_month_")&&removeClass("_uni_pay_box_month_","checked")},calcPayAmount:function(){var o=PayBox.payInfo,n=PayBox.payData,e=parseInt(o.month*o.price,10),a="";if("iap"==n.payType&&PayBox.payInfo.isIapPay&&PayBox.payInfo.iapItems){for(var t in o.iapItems)if(t==o.iapItemIndex){e=o.iapItems[t].price,a=o.iapItems[t].originPrice;break}if("1_auto"==o.iapItemIndex){var i=n.payParams.name,p=n.payParams.conti_policy;loadCss("//imgcache.gtimg.cn/club/platform/lib/pay/policy-dialog.css",function(){loadScript("//imgcache.gtimg.cn/c/=/club/platform/opencenter/wkcenter/lib/zepto-1.1.3.js,/club/mobile_web/msgbox.js,/club/platform/opencenter/wkcenter/iscroll-lite-5.2.0.js?max_age=31536000",function(){if("undefined"!=typeof MsgBox){var o='<div class="pay_box_iap_rules" id="pay_box_iap_rules"><ol><li>'+i+'连续包月服务有一种订阅类型：<div class="pay-iap-dialog-month-info">'+p+" </div> </li> <li>订阅"+i+"连续包月，在服务到期前24小时自动续订服务并通过iTunes账户扣除相应费用，同时延长"+i+'服务相应的有效期。  </li>   <li>   如需停止连续包月服务，请在下个账单日期之前在App Store"账户设置"页，点击“订阅”取消对应服务即可。   </li>   <li>使用条款：<br><em>https:'+n.payParams.iaprule_url+"</em></li>    <li>隐私条款：<br><em>https://m.vip.qq.com/clubact/2017/iap/term.html</em></li>  </ol></div>";n.isFromPage&&(o='<div class="pay_box_iap_rules" id="pay_box_iap_rules"><li>'+i+'连续包月服务有一种订阅类型：<div class="pay-iap-dialog-month-info">'+p+" </div> </li> <li>订阅"+i+"连续包月，在服务到期前24小时自动续订服务并通过iTunes账户扣除相应费用，同时延长"+i+'服务相应的有效期。  </li>   <li>   如需停止连续包月服务，请在下个账单日期之前在App Store"账户设置"页，点击“订阅”取消对应服务即可。   </li>   <li>使用条款：<br><em>https:'+n.payParams.iaprule_url+"</em></li>    <li>隐私条款：<br><em>https://m.vip.qq.com/clubact/2017/iap/term.html</em></li></div>"),setTimeout(function(){MsgBox.show({title:"连续包月规则",texts:o,buttons:[{text:"我知道了",click:function(){MsgBox.hide(),Zepto("#_union_pay_box_mask_").css("z-index","99999")}}]}),Zepto("#_union_pay_box_mask_").css("z-index","101"),Zepto(".wel-dialog").css("z-index","9991000 !important"),Zepto(".wel-dialog-content .txt").height("300px");new IScroll(".wel-dialog-content .txt",{scrollY:!0,click:!1});setTimeout(function(){Zepto("#pay_box_iap_rules").height(Zepto("#pay_box_iap_rules").height()+"px");new IScroll(".wel-dialog-content .txt",{scrollY:!0,click:!1})},1e3)},350)}})},"_unipolicy_dialog_css_")}getNode("_uni_pay_ori_amount_")&&(getNode("_uni_pay_ori_amount_").innerHTML="",getNode("_uni_pay_ori_amount_").innerHTML="原价"+a+"元")}else{if(PayBox.payInfo.isContiPay=!1,getNode("_uni_pay_box_up_tips_")&&(getNode("_uni_pay_box_up_tips_").innerHTML=PayBox.checkTipText(SERVICE_CONFIG[PayBox.payData.type].def_tips)),getNode("_uni_pay_box_tips_")&&!PayBox.isTxspAct&&(getNode("_uni_pay_box_tips_").style.display=IS_CONTINUE_MONTH?"":"none"),
getNode("_uni_pay_box_renew_wrap_")&&PayBox.isSupportNativeAutoRenew&&(getNode("_uni_pay_box_renew_wrap_").style.display=""),PayBox.payInfo.isAutoPay=getNode("_uni_pay_box_autorenew_").checked,IS_CONTINUE_MONTH&&1==o.month&&getNode("_unip_month_num_1")&&-1!=getNode("_unip_month_num_1").className.indexOf("checked"))getNode("_uni_pay_box_up_tips_")&&(getNode("_uni_pay_box_up_tips_").innerHTML=PayBox.checkTipText(SERVICE_CONFIG[PayBox.payData.type].tips)),getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display="none"),PayBox.payInfo.isContiPay=!0,e=SERVICE_CONFIG[PayBox.payData.type].contiprice;else if(n.payParams.monthProductId)for(var t in n.payParams.monthProductId)if(t==o.month){e=n.payParams.monthProductId[t].price;break}"wechat"!=PayBox.payData.account&&UIN!=PayBox.payInfo.uin&&getNode("_uni_pay_box_renew_wrap_")&&(getNode("_uni_pay_box_renew_wrap_").style.display="none"),PayBox.updateAutoRenewBubble(),PayBox.payInfo.isAutoPay="none"==getNode("_uni_pay_box_renew_wrap_").style.display?!1:PayBox.payInfo.isAutoPay}var _=PayBox.payInfo.couponInfo;if(_&&PayBox.payInfo.uin==PayBox.payData.payParams.uin&&_.vouCardId&&_.vouCodeId&&PayBox.canUseCoupon(o.type,o.month).canUse&&!PayBox.payInfo.isContiPay)$("_pay_box_original_price_")&&($("_pay_box_original_price_").innerHTML=e+"元"),$("_uni_pay_ori_amount_")&&($("_uni_pay_ori_amount_").innerHTML=e+"元"),$("_pay_box_original_price_")&&($("_pay_box_original_price_").style.display=""),$("_uni_pay_ori_amount_")&&($("_uni_pay_ori_amount_").style.display=""),$("_pay_box_coupon_txt_")&&($("_pay_box_coupon_txt_").innerHTML=_.value),e-=_.price/100;else{var s=PayBox.canUseCouponNum(o.type,o.month,PayBox.couponListData),c=s.curCouPonNum,u=s.totalCouponNum;$("_pay_box_original_price_")&&($("_pay_box_original_price_").style.display="none"),$("_uni_pay_ori_amount_")&&($("_uni_pay_ori_amount_").style.display="none");var d="当前无抵扣券适用"+(u>0?"（"+u+"张待选）":"");d=1==PayBox.couponNotUse?"当前未选择抵扣券"+(c>0?"（"+c+"张可选）":""):d,d=_&&_.status==PayBox.COUPON_STATUS.USED?"当前券已使用":d,$("_pay_box_coupon_txt_")&&($("_pay_box_coupon_txt_").innerHTML=d)}getNode("_uni_pay_box_amount_")&&(getNode("_uni_pay_box_amount_").innerHTML=e)},openService:function(){var o=PayBox.payInfo,n=PayBox.payData;switch(PayBox.closePayBox(!0),n.payType){case"iap":unionIapPay(o,n);break;case"qqwallet":unionAndrPay(o,n);break;case"wxaccount":unionWechatPay(o,n);break;case"hybrid":unionHybridPay(o,n);break;case"tenvideo":unionTenvideoPay(o,n);break;case"midasH5":o.isContiPay?unionAndrPay(o,n):midasH5Pay(o,n);break;case"h5":default:unionH5Pay(o,n)}},bindEvent:function(){var o="personal";-1!=window.location.href.indexOf("friend")&&(o="other"),addEvent("_uni_ask_friend_pay_","touchend",function(o){PayBox.isSupportSelectFriend&&-1==getNode("_uni_ask_friend_pay_").className.indexOf("disabled")&&""!=PayBox.payData.payParams.askType&&(ozPayReport(514),mqq.data.getFriendInfo({title:"选择好友",type:"1"},function(o){if(!o||0==o.length||!o[0].uin)return void mqq.ui.showDialog({title:"",text:"error",needOkBtn:!1,cancelBtnText:"确定"},function(){});PayBox.closePayBox(!0);var n=o[0].uin,e=o[0].name,a=PayBox.payInfo.month;IS_CONTINUE_MONTH&&1==a&&-1!=getNode("_unip_month_num_1").className.indexOf("checked");var t=PayBox.payInfo.aid,i=document.createElement("div");i.id=PayBox.boxId+"_tips";var p=formatTpl(BOX_TIPS_TPL,{req_icon:PayBox.payData.payParams.reqicon});i.innerHTML=p,document.body.appendChild(i),addEvent("_uni_pay_box_js_close_","touchend",function(o,e){e.stopPropagation(),e.preventDefault(),setTimeout(function(){document.body.removeChild(getNode(PayBox.boxId+"_tips"))},350),PayBox.closePayBox(),ozPayReport(518,n)}),addEvent("_uni_pay_box_js_send_","touchend",function(o,e){e.stopPropagation(),e.preventDefault(),setTimeout(function(){document.body.removeChild(getNode(PayBox.boxId+"_tips"))},350);var i="_uni_pay_box_ask_send_"+(new Date).getTime();window[i]=window._uni_pay_box_ask_send_;var p=t&&t.indexOf("!")>-1?t.substring(0,t.indexOf("!")):t,_=(new Date).getTime();loadScript("//imgcache.gtimg.cn/club/platform/lib/pay/smartpay.lib.util.js?_bid=193&t=20170120",function(){var o="//cgi.vip.qq.com/send/askService?callback="+i+"&uin="+n+"&type="+PayBox.payData.payParams.askType+"&month="+a+"&aid="+p+"&g_tk="+qw.util.getCSRFToken();_=(new Date).getTime(),loadScript(o,null,null,function(){cgiReport("uniAskService",-1,(new Date).getTime()-_)})}),ozPayReport(515,n)});var _="发送给"+(e||n);getNode("_uni_pay_box_js_title_").innerHTML=_;var s="代付"+a+"个月"+PayBox.payData.payParams.name+"服务";getNode("_uni_pay_box_js_content_").innerHTML=s}))}),window._uni_pay_box_ask_send_=function(o){var n="//i.gtimg.cn/vipstyle/mobile/client/common_share_dialog/css/style.css?max_age=86400000";loadCss(n,function(){var n='<div id="uni_result_dialog" class="common-share-dialog" ontouchmove="return false;" ><div class="common-share-dialog-cnt"><span id="ui-dialog-close" class="common-share-dialog-close icon-close"></span><div id="uni_result_content" class="common-share-dialog-bd"><h4>温馨提示</h4><div>消息已发送！<br/>还可把愿望分享到其他地方，让更多朋友帮你实现~</div></div><div id="uni_result_btn" class="common-share-dialog-ft ui-btn-group js-msgbox-btns"><button type="button">开通会员</button><button type="button">求送会员</button></div></div></div>',e="<div>系统繁忙，稍后再试！</div>",a='<button type="button" id="uni_ok_btn">确定</button>';if("0"==o.ret?(e="<div>消息已发送！<br/>还可把愿望分享到其他地方，让更多朋友帮你实现~</div>",a='<button type="button" id="uni_share_to_qzone">分享到QQ空间</button><button type="button" id="uni_share_to_wechat">分享到朋友圈</button>'):"-2"==o.ret&&(e="<div>不能向非好友索要！</div>"),!getNode("uni_result_dialog")){var t=document.createElement("div");t.innerHTML=n,document.body.appendChild(t)}getNode("uni_result_content").innerHTML=e,getNode("uni_result_btn").innerHTML=a,addClass("uni_result_dialog","show"),addEvent("ui-dialog-close","touchend",function(o,n){n.stopPropagation(),n.preventDefault(),removeClass("uni_result_dialog","show"),PayBox.closePayBox()}),addEvent("uni_ok_btn","touchend",function(o,n){n.stopPropagation(),n.preventDefault(),removeClass("uni_result_dialog","show"),PayBox.closePayBox()}),addEvent("uni_share_to_qzone","touchend",function(n,e){e.stopPropagation(),e.preventDefault(),getNode("uni_result_dialog").parentNode.removeChild(getNode("uni_result_dialog"));var a=PayBox.payInfo.aid,t=a&&a.indexOf("!")>-1?a.substring(0,a.indexOf("!")):a,i={share_url:("http://mc.vip.qq.com/send/detail?type=share_qzone_ask&months="+o.askMonth+"&_wv=3&src=&aid="+t+"&clubtype="+o.clubType+"&uin="+PayBox.payInfo.uin+"&order="+o.order+"&friend="+o.askUin).replace(/(&|\?)sid=(([^&]+)|$)/,""),title:"给你一个机会",desc:"如果给你一个爱我的机会，帮我开启SVIP+生活模式，你是否会珍惜？",image_url:"http:"+PayBox.payData.payParams.reqicon};mqq.ui.shareMessage({title:i.title,desc:i.desc,share_type:1,share_url:i.share_url,image_url:i.image_url},function(o){0==o.retCode?ozPayReport(523):1==o.retCode&&ozPayReport(525),PayBox.closePayBox()})}),addEvent("uni_share_to_wechat","touchend",function(n,e){e.stopPropagation(),e.preventDefault(),getNode("uni_result_dialog").parentNode.removeChild(getNode("uni_result_dialog"));var a=PayBox.payInfo.aid,t=a&&a.indexOf("!")>-1?a.substring(0,a.indexOf("!")):a,i={share_url:("http://mc.vip.qq.com/send/detail?type=share_wx_ask&months="+o.askMonth+"&_wv=3&src=&aid="+t+"&clubtype="+o.clubType+"&uin="+PayBox.payInfo.uin+"&order="+o.order+"&friend="+o.askUin).replace(/(&|\?)sid=(([^&]+)|$)/,""),title:"如果给你一个爱我的机会，帮我开启SVIP+生活模式，你是否会珍惜？",desc:"如果给你一个爱我的机会，帮我开启SVIP+生活模式，你是否会珍惜？",image_url:"http:"+PayBox.payData.payParams.reqicon};mqq.ui.shareMessage({title:i.title,desc:i.desc,share_type:3,share_url:i.share_url,image_url:i.image_url},function(o){0==o.retCode?ozPayReport(524):-2==o.retCode&&ozPayReport(526),PayBox.closePayBox()})})},"_uni_pay_share_dialog_")},addEvent("uni_club_rule","touchend",function(o){var n=PayBox.payData,e="";isIphone&&(e=n.payParams.iaprule_url),openUrl(e)}),addEvent("uni_private_rule","touchend",function(o){openUrl("//m.vip.qq.com/clubact/2017/iap/term.html")}),addEvent("applepay_guide","touchend",function(o){openUrl("//m.vip.qq.com/clubact/iap/applepay/index.html?disopen=1")}),addEvent("_uni_pay_box_send_friend_","touchend",function(o){PayBox.isSupportSelectFriend&&mqq.data.getFriendInfo({title:"选择好友",type:"1"},function(o){o&&o.length>0&&""!=o[0].uin&&(PayBox.payInfo.changeUin=!1,PayBox.setSendStatus(o[0].uin,o[0].name),PayBox.updateAskPayDisplay(),$("_pay_box_coupon_")&&($("_pay_box_coupon_").style.display="none"))})}),delegate("_uni_pay_box_month_group_","touchend",".js_month_group",function(o){if(-1!=o.className.indexOf("disabled"))return!1;for(var n=0;n<getNode("_uni_pay_box_month_group_").children.length;n++)getNode("_uni_pay_box_month_group_").children[n]&&getNode("_uni_pay_box_month_group_").children[n].id&&removeClass(getNode("_uni_pay_box_month_group_").children[n].id,"checked");addClass(o.id,"checked");var e="";-1==o.className.indexOf("custom-other")?(getNode("_uni_pay_box_month_")&&(getNode("_uni_pay_box_month_").blur(),getNode("_uni_pay_box_month_").value="其他"),PayBox.resetOtherMonth(),e=o.getAttribute("data-month")):(PayBox.enableOtherMonth(),e=o.value),PayBox.setMonth(e),PayBox.payInfo.month=e,PayBox.canUseCoupon(PayBox.payInfo.type,PayBox.payInfo.month).canUse||(PayBox.payInfo.couponInfo=null),PayBox.setCouponStatus()}),addEvent("_uni_pay_box_month_","touchend",function(o,n){n.stopPropagation(),isIOS&&n.preventDefault(),getNode("_uni_pay_box_month_").focus(),o.value="";for(var e=0;e<getNode("_uni_pay_box_month_group_").children.length;e++)getNode("_uni_pay_box_month_group_").children[e]&&getNode("_uni_pay_box_month_group_").children[e].id&&removeClass(getNode("_uni_pay_box_month_group_").children[e].id,"checked");addClass(o.id,"checked")}),addEvent("_uni_pay_box_month_","focus",function(o){o.value=""}),addEvent("_uni_pay_box_month_","input",function(o){for(var n=0;n<getNode("_uni_pay_box_month_group_").children.length;n++)getNode("_uni_pay_box_month_group_").children[n]&&getNode("_uni_pay_box_month_group_").children[n].id&&removeClass(getNode("_uni_pay_box_month_group_").children[n].id,"checked");o.value=o.value.replace(/[^0-9]/g,""),PayBox.validOpenMonth(),PayBox.canUseCoupon(PayBox.payInfo.type,PayBox.payInfo.month).canUse||(PayBox.payInfo.couponInfo=null),PayBox.setCouponStatus()}),addEvent("_uni_pay_box_month_","blur",function(o){PayBox.validOpenMonth()}),addEvent("_uni_pay_box_renew_wrap_","touchend",function(o,n){n.preventDefault(),n.stopPropagation(),PayBox.payInfo.isAutoPay=getNode("_uni_pay_box_autorenew_").checked?!1:!0,getNode("_uni_pay_box_autorenew_").checked=PayBox.payInfo.isAutoPay,PayBox.hasShowAutoRenewBubble&&"bubble-tips"!=getNode("_uni_pay_box_autorenew_bubble").className&&!PayBox.payInfo.isAutoPay&&getNode("_uni_pay_box_autorenew_bubble")&&(getNode("_uni_pay_box_autorenew_bubble").className="bubble-tips"),PayBox.updateAutoRenewBubble()}),delegate("_uni_pay_box_month_group_","touchend",".js-iap-item",function(o){var n=o.getAttribute("data-month");if(n){for(var e=0;e<getNode("_uni_pay_box_month_group_").children.length;e++)getNode("_uni_pay_box_month_group_").children[e]&&getNode("_uni_pay_box_month_group_").children[e].id&&removeClass(getNode("_uni_pay_box_month_group_").children[e].id,"active");addClass(o.id,"active"),PayBox.payInfo.month=n,PayBox.payInfo.iapItemIndex=o.getAttribute("data-iapItemIndex"),PayBox.calcPayAmount()}}),delegate("_uni_pay_box_month_group_","touchend",".js-iap-page",function(o){var n=o.getAttribute("data-month");if(n){for(var e=0;e<getNode("_uni_pay_box_month_group_").children.length;e++)getNode("_uni_pay_box_month_group_").children[e]&&getNode("_uni_pay_box_month_group_").children[e].id&&removeClass(getNode("_uni_pay_box_month_group_").children[e].id,"checked");addClass(o.id,"checked"),PayBox.payInfo.month=n,PayBox.payInfo.iapItemIndex=o.getAttribute("data-iapItemIndex"),PayBox.calcPayAmount()}}),delegate("_uni_pay_box_month_group_","touchend",".js_spec_month",function(o){var n=o.getAttribute("data-month");if(n){for(var e=0;e<getNode("_uni_pay_box_month_group_").children.length;e++)getNode("_uni_pay_box_month_group_").children[e]&&getNode("_uni_pay_box_month_group_").children[e].id&&removeClass(getNode("_uni_pay_box_month_group_").children[e].id,"checked");addClass(o.id,"checked"),PayBox.payInfo.month=n,PayBox.calcPayAmount()}}),addEvent("_uni_pay_box_uin_","touchend",function(o){getNode("_uni_pay_box_uin_").focus()}),addEvent("_uni_pay_box_uin_","blur",function(o){var n=o.value;PayBox.blurUin(n)}),addEvent("_uni_pay_box_uin_","focus",function(o){o.value="",getNode("_uni_pay_box_friend_nickname_")&&(getNode("_uni_pay_box_friend_nickname_").innerHTML=""),PayBox.payInfo.changeUin=!0,getNode("_uni_pay_box_uin_").style.width="100px"}),addEvent("_union_smartpay_box_","touchend",function(o){"_uni_pay_box_month_"!=o.id&&"_uni_pay_box_uin_"!=o.id&&"common-pay-label-all"!=o.className&&(getNode("_uni_pay_box_month_")&&getNode("_uni_pay_box_month_").blur(),getNode("_uni_pay_box_uin_")&&getNode("_uni_pay_box_uin_").blur())}),addEvent("_uni_pay_box_open_","touchend",function(o){return-1!=o.className.indexOf("disabled")?!1:(getNode("_uni_pay_box_month_")&&getNode("_uni_pay_box_month_").blur(),getNode("_uni_pay_box_uin_")&&getNode("_uni_pay_box_uin_").blur(),void PayBox.openService())}),addEvent("_union_pay_box_close_","touchend",function(o){PayBox.closePayBox(),PayBox.dispatchEvent("_union_smartpay_box_","touchend")}),addEvent("_pay_box_coupon_more_","touchend",function(o){PayBox.queryCoupons()})},initConfig:function(o,n){if(PayBox.payInfo.month=o.payParams.month||3,PayBox.payInfo.backUrl=o.backUrl,PayBox.payInfo.type=o.type,PayBox.payInfo.uin=o.payParams.uin||UIN,PayBox.payInfo.nickName=o.nickName||"",PayBox.payInfo.aid=o.payParams.aid||"",PayBox.payInfo.isAutoPay=o.payParams.is_autopay,PayBox.payInfo.monthList=o.payParams.monthList||"3,1,6",PayBox.payInfo.defaultMonth=o.payParams.month||3,PayBox.hasShowAutoRenewBubble=!1,"iap"==o.payType&&o.payParams.isIap===!0){var e=o.payParams.iap;if(!e)return!1;if(PayBox.payInfo.isIapPay=!0,PayBox.payInfo.iapItems=e,!(o.payParams.iapItemIndex in e))for(var a in e){o.payParams.month=e[a].month;break}}else PayBox.payInfo.isIapPay=!1,PayBox.payInfo.iapItems=null,PayBox.payInfo.price=o.payParams.price},initCoupon:function(o,n){PayBox.isSupportCoupon=PayBox.config.disableCoupon===!0||"wechat"==PayBox.payInfo.account||qw.util.isAndroid&&mqq.compare("6.5.5")<=0?!1:!0,PayBox.isSupportCoupon&&PayBox.couponListData&&"undefined"!=typeof PayBox.couponListData.errcode&&"undefined"!=typeof PayBox.couponListData.vouList&&0==PayBox.couponListData.errcode&&PayBox.couponListData.vouList.length>0&&$("_pay_box_coupon_")&&($("_pay_box_coupon_").style.display="")},init:function(o,n){return PayBox.isBoxOpening?!1:(PayBox.isBoxOpening=!0,PayBox.inputSetting=n,PayBox.payData=o,PayBox.checkCurEnv(o),PayBox.initConfig(o,n),PayBox.initCoupon(o,n),PayBox.showPayBox(o,n),PayBox.bindEvent(),o.isSendService&&o.friendUin&&o.friendUin!=UIN&&PayBox.setSendStatus(o.friendUin,o.nickName),isIOS?PayBox.calcPayAmount():getCoupons(!0),PayBox.updateAskPayDisplay(),void PayBox.updateAutoRenewBubble())},checkTipText:function(o){var n="开通即送1个月腾讯视频会员，每人限1次";return PayBox.isTxspAct?n:o}},getPayParamsByType=function(o,n,e){if(!e)return null;var a=SERVICE_CONFIG[o.type]||{},t={};switch(t.type=o.type,t.name=a.name,t.icon=a.icon,t.reqicon=a.reqicon||"",t.iaprule_url=a.iaprule_url||"",t.aid=getAidByOS(o.aid)||getAidByOS(a.aid),t.price=a.price,t.uin="wechat"==o.account?n.uin:UIN,t.monthList=o.monthList||a.monthList||"3,1,6",t.month=o.month||a.month||t.monthList.split(",")[0],t.code=a.code,t.dcReport=a.dcReport,t.mustH5=a.mustH5||"0",t.askType=a.askType||"",t.spePrice=a.spePrice||"",t.is_autopay=o.is_autopay,t.conti_policy=a.conti_policy,e){case"iap":t.iap=a.iap,t.isIap=null!=t.iap;break;case"hybrid":t.offerId=o.offerid?o.offerid:a.offerid,t.userId=UIN,t.serviceCode=a.code?a.code.toUpperCase():"",t.serviceName=a.name;break;case"wxaccount":t.offerId=o.offerid?o.offerid:a.offerid,t.userId=UIN,t.serviceCode=a.code?a.code.toUpperCase():"",t.serviceName=a.name;break;case"qqwallet":t.offerId=o.offerid?o.offerid:a.offerid,t.userId=UIN,t.serviceCode=a.code?a.code.toUpperCase():"",t.serviceName=a.name;break;case"h5":t.offerId=o.offerid?o.offerid:a.offerid,t.h5_ext=a.h5_ext;break;default:t.offerId=o.offerid?o.offerid:a.offerid,t.h5_ext=a.h5_ext,t.monthProductId=a.monthProductId||null}return t},getPlatformPayInfo=function(o,n){if(!(o.type in SERVICE_CONFIG))return null;var e={payType:"",friendUin:o.friendUin||"",nickName:o.nickName||"",payParams:{}};if(isIphone)e.payType="1"===n.isH5Pay?"h5":"iap",e.payType="iap";else if(isAndroid){e.payType="qqwallet";var a=o.monthList?o.monthList.split(","):new Array;IS_CONTINUE_MONTH=1==a.length?!1:!0}else isWechat()?(e.payType="wechat"==o.account?"wxaccount":"hybrid",IS_CONTINUE_MONTH=!0):!isIOSFlatform&&isTenvideo()?(e.payType="tenvideo",IS_CONTINUE_MONTH=!0):(e.payType="h5",IS_CONTINUE_MONTH=!1);return"undefined"!=typeof SERVICE_CONFIG[o.type].monthProductId&&(e.payType="midasH5"),SERVICE_CONFIG[o.type].isSupportContinuous!==!0&&(IS_CONTINUE_MONTH=!1),"wechat"==o.account&&(e.account=o.account,e.uin=n.uin),e.payParams=getPayParamsByType(o,n,e.payType),e.type=o.type,e.backUrl=encodeURIComponent(o.backUrl||document.location.href),e.isSendService=o.isSendService,unionOpenCallback=o.onPayCallback,e},openService=function(o,n){var e=getPlatformPayInfo(o,n);checkWhiteList(e.payParams.uin,"wl_sp",function(){PayBox.init(e,n)})},openServicePage=function(o,n){var e=getPlatformPayInfo(o,n);PayBox.payData=e,PayBox.payData.isFromPage=!0,PayBox.checkCurEnv(e),PayBox.initConfig(e,n),PayBox.resetPageShow(e),PayBox.bindEvent(),e.isSendService&&e.friendUin&&e.friendUin!=UIN&&PayBox.setSendStatus(e.friendUin,e.nickName),PayBox.calcPayAmount(),PayBox.updateAskPayDisplay(),PayBox.updateAutoRenewBubble(),getCoupons(!0)},unionOpen=function(o){var n={isH5Pay:0,pageType:"personal",payType:"open",iconUrl:"",multiIconUrl:""};inputConfig=o,queryCanOpen(o,function(e){o.is_autopay="1"==e.isAutoPayBlackUser?!1:!0,"wechat"==o.account&&(n.uin=e.uin),openService(o,n)})},pageOpen=function(o){var n={isH5Pay:0,pageType:"personal",payType:"open",iconUrl:"",multiIconUrl:""};return inputConfig=o,isIphone&&(!SERVICE_CONFIG[o.type]||SERVICE_CONFIG[o.type]&&!SERVICE_CONFIG[o.type].iap)?(mqq.ui.showDialog({title:"温馨提示",text:"抱歉，暂不支持iOS平台，敬请期待！",needCancelBtn:!1},function(o){0==o.button&&mqq.ui.popBack()}),!1):void queryCanOpen(o,function(e){o.is_autopay="1"==e.isAutoPayBlackUser?!1:!0,openServicePage(o,n)})},showDialog=function(o,n){(isAndroid||isIOS)&&"undefined"!=typeof mqq&&"undefined"!=typeof mqq.ui&&"undefined"!=typeof mqq.ui.showDialog?mqq.ui.showDialog({title:n||"温馨提示",text:o,needCancelBtn:!1},function(){}):alert(o)},getAidByOS=function(o){o=o||"";var n=o,e=/^mvip(.+)$/,a=o.match(e);return isIphone&&-1==o.indexOf("ios")&&null!=a&&(n="mios"+a[1]),isAndroid&&/^mios(.+)/.test(o)&&(n=o.replace("mios","mvip")),isWechat()&&/(iPhone).*?\/([\d\.]+)/.test(navigator.userAgent)&&-1==o.indexOf("ios")&&(n=o.replace("mvip","mios")),n},getURLParam=function(o,n){var e="",a=!1;if(n=n||window.location.search,0==n.indexOf("?")&&n.indexOf("=")>1)for(var t=n.substring(1,n.length).split("&"),i=0;i<t.length&&!a;)t[i].indexOf("=")>0&&t[i].split("=")[0].toLowerCase()==o.toLowerCase()&&(e=t[i].split("=")[1],a=!0),i++;return unescape(e)},jsonCount=100,queryCanOpen=function(o,n){if(isIphone&&(!SERVICE_CONFIG[o.type]||SERVICE_CONFIG[o.type]&&!SERVICE_CONFIG[o.type].iap))return showDialog("抱歉，暂不支持iOS平台，敬请期待！"),!1;var e=(new Date).getTime(),a="callback_checkCanOpen"+ ++jsonCount;window[a]=function(a){return function(a){if(cgiReport("canOpen",0,(new Date).getTime()-e),-7==a.ret&&0==a.is_login)return showDialog("您尚未登录。"),!1;if("wechat"==o.account){if(a.uin&&1==a.canOpen&&0==a.specialStatus&&"CJCLUBT"==a.serviceType)return n(a),!1;if(0==a.ret&&0==a.isBindWechat)return login(location.href),!1}else if(1==a.canOpen&&0==a.specialStatus&&"CJCLUBT"==a.serviceType)return n(a),!1;showDialog(a.msg)}}((new Date).getTime()),loadScript("//imgcache.gtimg.cn/club/platform/lib/pay/smartpay.lib.util.js?_bid=193&t=20170120",function(){var n="//cgi.vip.qq.com/qqvip/unionCanOpen?otype="+o.type+"&g_tk="+qw.util.getCSRFToken({useWechatSkey:"wechat"==o.account?!0:!1})+"&callback="+a+("wechat"==o.account?"&account=wechat&logintype=1":"")+"&rand="+Math.random();e=(new Date).getTime(),loadScript(n,null,null,function(){cgiReport("canOpen",-1,(new Date).getTime()-e)})})},cgiReport=function(o,n,e){var a=new Image,t=isIOS?"ios":isAndroid?"android":"other";a.src="//report.huatuo.qq.com/code.cgi?appid=10096&domain=cgi.vip.qq.com&platform="+t+"&cgi=unit/"+o+"&type="+(0==n?1:2)+"&code="+n+"&time="+e},dcReport=function(o,n,e,a,t,i,p,_,s,c,u,d){var r=parseInt(fromId),y={uin:o||cookie_uin,platform_type:2,pay_type:n+r,cur_page:location.protocol+"//"+location.host+location.pathname,js_err:t||"",user_info:"object"==typeof e?JSON.stringify(e):e||"",pay_info:"object"==typeof a?JSON.stringify(a):a||"",mqq_ver:isAndroid?getAndroidVersion():isIOS&&"undefined"!=typeof mqq?mqq.QQVersion:"-1",mqq_os:isAndroid?"android":isIOS?"ios":"other",ext1:location.host,ext2:i||"",ext3:"undefined"!=typeof p?p:"",ext4:getURLParam("source")||getURLParam("ADTAG"),ext6:_||"",ext7:s||"",ext8:"",ext9:u||"",ext10:d||""};y.user_info=filterStr(y.user_info),y.pay_info=filterStr(y.pay_info);var m=[];for(var l in y)m.push(l+"="+encodeURIComponent(y[l]));var h="//cgi.vip.qq.com/dc/report";204==n&&(h="//r.vip.qq.com/report/dc");var f=new Image;f.width=0,f.height=0,f.src=h+"?dcid=dc00225&"+m.join("&")},ozPayReport=function(o,n){try{var e=PayBox.payInfo.aid.split("!"),a=isAndroid?"uni_android":isIOS?"uni_ios":"uni_pc",t=e[1]?e[1].replace("adtag_",""):"";t=decodeURIComponent(t).replace("http://","").replace(/\?.*/,"").replace(/\/$/,"").replace(/\//g,"_");var i=e[0],p=inputConfig.type,_=PayBox.payInfo.month;n=n||0;var s={biz_id:10001,to_uin:n,biz_subid:10001002,domain:a,src:t,oper_obj_id:p,oper_id:o,ret_id:_,page_id:i},c="//r.vip.qq.com/report/dc?dcid=dc00145";for(var u in s)c+="&"+u+"="+s[u];var d=new Image(1,1);d.src=c}catch(r){}},filterStr=function(o){return(o+"").replace(/\"/g,"").replace(/\'/g,"").replace(/\!/g,"i").replace(/\</g,"").replace(/\>/g,"").replace(/\//g,"").replace(/\,/g,"").replace(/\{/g,"").replace(/\}/g,"")},getAndroidVersion=function(){var o=navigator.userAgent.match(/AND_SQ[\w]*_([\d\.]+)/);return o&&o[1]?o[1]:!1},_changeVisibility=function(){document.addEventListener("qbrowserVisibilityChange",function(o){var n=0;try{n=window.localStorage.getItem("union_pay_success")}catch(e){}if(o.hidden===!1&&1==n){try{window.localStorage.setItem("union_pay_success",0)}catch(e){}location.reload()}})},deviceInfo={},_checkDevice=function(){return"undefined"!=typeof deviceInfo.officially?JSON.stringify(deviceInfo):("undefined"!=typeof mqq,"not support")},_checkInvoker=function(){var o=document.querySelector('script[src^="'+protocol+'://imgcache.gtimg.cn/club/platform/lib/pay/smartpay.union"]');if(o||(o=document.querySelector('script[src^="'+protocol+'://i.gtimg.cn/club/platform/lib/pay/smartpay.union"]')),o||(o=document.querySelector('script[src^="'+protocol+'://imgcache.qq.com/club/platform/lib/pay/smartpay.union"]')),o)n=o.src,chkJsParam(n);else for(var n,e=document.getElementsByTagName("script"),a=0,t=e.length;t>a&&(n=e[a].src,!chkJsParam(n));a++);},chkJsParam=function(o){if(o){var n=o.match(/\/smartpay.union-?([\.\d]*)\.js.*[?&]fromId=(\d+)&?/);if(n&&n[2])return fromId=n[2],!0}return!1},checkWhiteList=function(o,n,e){loadScript("//imgcache.gtimg.cn/ACT/vip_act/act_data/368049.json.js?t="+ +new Date,function(a){var t=window.AMD_368049.form[1][0][n]||null;window.isGrayEnv=1==window.AMD_368049.form[1][0].is_gray,window.isDisableIos=1==window.AMD_368049.form[1][0].is_disable_ios,t&&-1!==t.indexOf(+o)?(window.isGrayUser=!0,e()):(window.isGrayUser=!1,e())})};_changeVisibility(),_checkDevice(),_checkInvoker(),dcReport(cookie_uin,204),exports.getCoupons=getCoupons,exports.unionOpen=unionOpen,exports.pageOpen=pageOpen}(window.unionPay||(window.unionPay={})),"function"==typeof define&&define("lib/pay/smartpay.union",function(o,n){return window.unionPay});