(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a54e1"],{"09ac":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{xs:15}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){t.addBtn()}}},[t._v("添加")])],1)],1),a("br"),a("Row",[t.tableLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v("加载中...")])],1)],1):t._e(),a("Table",{attrs:{border:"",columns:t.columns,data:t.dataList},on:{"on-sort-change":t.onSortChange}})],1),t.addModal.show?a("add-component",{on:{"on-add-modal-success":function(e){t.getTableDataExcute()},"on-add-modal-hide":t.addModalHide}}):t._e(),t.editModal.show?a("edit-component",{attrs:{"modal-id":t.editModal.id},on:{"on-edit-modal-success":function(e){t.getTableDataExcute()},"on-edit-modal-hide":t.editModalHide}}):t._e(),a("Modal",{model:{value:t.modalCoverImage.show,callback:function(e){t.$set(t.modalCoverImage,"show",e)},expression:"modalCoverImage.show"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("图片预览")]),a("div",{staticClass:"text-center"},[t.modalCoverImage.show?a("img",{staticClass:"center-align",staticStyle:{width:"100%"},attrs:{src:t.modalCoverImage.url,alt:""}}):t._e()]),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("添加")]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"封面："}},[a("upload",{attrs:{"is-delete":!1,"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.cover_image,callback:function(e){t.$set(t.formData,"cover_image",e)},expression:"formData.cover_image"}})],1),a("FormItem",{attrs:{label:"跳转链接：",prop:"url"}},[a("Input",{attrs:{placeholder:"请输入跳转链接"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),a("FormItem",{attrs:{label:"描述",prop:"description"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("FormItem",{attrs:{label:"排序：",prop:"description"}},[a("InputNumber",{model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",e)},expression:"formData.weight"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.addExcute}},[t._v("保存 ")])],1)],1)],1)},l=[],r=a("66df"),s=function(){return r["a"].request({url:"/api/admin/news/carousels",method:"get"})},d=function(t){return r["a"].request({url:"/api/admin/news/carousels/"+t,method:"delete"})},c=function(t){return r["a"].request({url:"/api/admin/news/carousels",data:t,method:"post"})},u=function(t,e){return r["a"].request({url:"/api/admin/news/carousels/"+e,data:t,method:"patch"})},m=function(t){return r["a"].request({url:"api/admin/news/carousels/"+t,method:"get"})},p=a("c13c"),f={components:{Upload:p["a"]},data:function(){return{modalShow:!0,saveLoading:!1,formData:{description:" ",weight:10,cover_image:{attachment_id:0,url:""},url:" "},rules:{},imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:800,upload_url:window.uploadUrl.uploadCarousel,file_name:"file",multiple:!1,file_num:3,default_list:[]}}},methods:{addExcute:function(){var t=this;t.$refs.formData.validate(function(e){e&&(t.saveLoading=!0,c(t.formData).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-add-modal-success"),t.$emit("on-add-modal-hide"),t.$Notice.success({title:e.message})},function(e){t.saveLoading=!1}))})},cancel:function(){this.modalShow=!1,this.$emit("on-add-modal-hide")},uploadChange:function(t,e){}}},h=f,g=a("2877"),v=Object(g["a"])(h,n,l,!1,null,null,null),w=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:"600"},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("修改")]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"封面："}},[t.formdataFinished?a("upload",{attrs:{"is-delete":!1,"upload-config":t.imguploadConfig},on:{"on-upload-change":t.uploadChange},model:{value:t.formData.cover_image,callback:function(e){t.$set(t.formData,"cover_image",e)},expression:"formData.cover_image"}}):t._e()],1),a("FormItem",{attrs:{label:"跳转链接：",prop:"url"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),a("FormItem",{attrs:{label:"描述：",prop:"description"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("FormItem",{attrs:{label:"排序：",prop:"description"}},[a("InputNumber",{model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",e)},expression:"formData.weight"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.editExcute}},[t._v("保存 ")])],1),!0===t.spinLoading?a("div",{staticClass:"demo-spin-container"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"spin-icon-load",attrs:{type:"load-c",size:"18"}}),a("div",[t._v("加载中...")])],1)],1):t._e()],1)],1)},b=[],x=(a("c5f6"),{components:{Upload:p["a"]},props:{modalId:{type:Number,default:0}},data:function(){return{modalShow:!0,saveLoading:!1,spinLoading:!0,formdataFinished:!1,formData:{id:0,description:" ",url:" ",weight:10,cover_image:{attachment_id:0,url:""}},rules:{},imguploadConfig:{headers:{Authorization:window.access_token},format:["jpg","jpeg","png","gif"],max_size:800,upload_url:window.uploadUrl.uploadCarousel,file_name:"file",multiple:!1,file_num:3,default_list:[]}}},mounted:function(){this.modalId>0&&this.getInfoByIdExcute()},methods:{getInfoByIdExcute:function(){var t=this;m(t.modalId).then(function(e){var a=e.data;t.formData={id:a.id,url:a.url,weight:a.weight,description:a.description,cover_image:{attachment_id:a.cover_image.attachment_id,url:a.cover_image.url}},t.imguploadConfig.default_list=[t.formData.cover_image],t.formdataFinished=!0,t.spinLoading=!1})},editExcute:function(){var t=this;t.$refs.formData.validate(function(e){e&&(t.saveLoading=!0,u(t.formData,t.formData.id).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$emit("on-edit-modal-success"),t.$emit("on-edit-modal-hide"),t.$Notice.success({title:e.message})},function(e){t.saveLoading=!1}))})},cancel:function(){this.modalShow=!1,this.$emit("on-edit-modal-hide")},uploadChange:function(t,e){}}}),D=x,k=Object(g["a"])(D,_,b,!1,null,null,null),y=k.exports,I={components:{AddComponent:w,EditComponent:y},data:function(){var t=this;return{tableLoading:!1,dataList:[],tableStatus:{type:[]},addModal:{show:!1},editModal:{show:!1,id:0},modalCoverImage:{show:!1,url:null},columns:[{title:"ID",key:"id",sortable:!0,minWidth:50},{title:"跳转链接",key:"url",minWidth:150},{title:"描述",key:"description",minWidth:150},{title:"封面",key:"",minWidth:150,render:function(t,e){if(e.row.cover_image.url)return t("div",[t("img",{attrs:{src:e.row.cover_image.url,class:"fancybox",href:e.row.cover_image.url,title:"图片"},style:{width:"40px",height:"40px"}})])}},{title:"排序",key:"weight",minWidth:150},{title:"创建时间",key:"created_at",sortable:!0,minWidth:150},{title:"操作",minWidth:200,render:function(e,a){var o=t;return e("div",[e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.editModal.show=!0,t.editModal.id=a.row.id}}},"修改"),e("Poptip",{props:{confirm:!0,title:"您确定要删除「"+a.row.id+"」？",transfer:!0},on:{"on-ok":function(){o.destroyExcute(a.row.id,a.index)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",size:"small",placement:"top"}},"删除")])])}}]}},created:function(){var t=this;t.getTableDataExcute()},methods:{getTableDataExcute:function(t){var e=this;e.tableLoading=!0,s(e.searchForm).then(function(t){var a=t.data;e.dataList=a,e.tableLoading=!1,e.globalFancybox()},function(t){e.tableLoading=!1})},onSortChange:function(t){var e=t.column.key+","+t.order;this.searchForm.order_by=e,this.getTableDataExcute(1)},destroyExcute:function(t,e){var a=this;d(t).then(function(t){a.dataList.splice(e,1),a.$Notice.success({title:t.message})})},addBtn:function(){this.addModal.show=!0},addModalHide:function(){this.addModal.show=!1},editModalHide:function(){this.editModal.show=!1}}},C=I,$=Object(g["a"])(C,o,i,!1,null,null,null);e["default"]=$.exports}}]);